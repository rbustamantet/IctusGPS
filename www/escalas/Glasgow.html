<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="manifest" href="../site.webmanifest">
<link rel="icon" type="image/png" sizes="192x192" href="../iconos/ictusgps.png">
<link rel="apple-touch-icon" sizes="180x180" href="../iconos/ictusgps.png">
<link rel="shortcut icon" href="../iconos/ictusgps.png">
<meta name="theme-color" content="#0f3d83">
<title>Escala de Glasgow (GCS)</title>

<style>
:root{
  --bg:#f9fafc;--ink:#0e1a33;--accent:#0f3d83;
  --border:#e5e9f2;--muted:#64748b;
  --ok-bg:#dcfce7;--ok-txt:#065f46;--ok-bd:#86efac;
  --mid-bg:#fef3c7;--mid-txt:#92400e;--mid-bd:#fde68a;
  --bad-bg:#fee2e2;--bad-txt:#991b1b;--bad-bd:#fecaca;
}
:root{
  --bg:#f9fafc;
  --ink:#0e1a33;
  --accent-dark:#0f3d83;
  --accent-light:#2563eb;
  --border:#e5e9f2;
  --muted:#64748b;
  --ok:#166534; --ok-bg:#e9fce7; --ok-ring:#bbf7d0;
  --mid:#92400e; --mid-bg:#fff7ed; --mid-ring:#fed7aa;
  --bad:#991b1b; --bad-bg:#fef2f2; --bad-ring:#fecaca;
  --azul-institucional:#0f3d83;
}
*{box-sizing:border-box}

/* =========================================================
   SAFE-TOP
========================================================= */
.safe-top {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: calc(env(safe-area-inset-top, 0px) + 60px);
  background: var(--azul-institucional);
  z-index: 1001;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding-top: env(safe-area-inset-top, 0px);
}
.safe-content {
  width: 100%;
  max-width: 1080px;
  padding: 6px 16px 8px;
  display: flex;
  justify-content: space-between;
  align-items: flex-start; 
  /* Añadir un padding-top para empujar los iconos ligeramente hacia abajo y no pegarlos al borde */
  padding-top: 5px; /* Ajuste manual para bajar los iconos un poco */
  padding-bottom: 0; /* Eliminar padding inferior para reservar ese espacio */
}
.safe-left {
  display: flex;
  align-items: center;
  gap: 10px;
}
.safe-mini {
  width: 44px;
  height: 44px;
  object-fit: contain;
  padding: 4px;
  box-shadow: 0 0 4px rgba(0,0,0,0.1);
}
.safe-logo {
  height: 44px;
  width: auto;
}
.safe-actions {
  display: flex;
  gap: 10px;
}
.safe-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: rgba(255,255,255,0.15);
  border: 1px solid white;
  border-radius: 50%;
  transition: background .25s, border-color .25s, transform .1s;
}
.safe-btn:hover {
  background: #01c5fe;
  border: 1px solid white;
}
.safe-btn:active { transform: scale(0.95); }
.safe-icon {
  width: 32px;
  height: 32px;
  object-fit: contain;
}
/* CABECERA */
header{position:sticky;
  z-index:1002;background:var(--accent);color:#fff;
  box-shadow:0 2px 6px rgba(0,0,0,.08);top: calc(env(safe-area-inset-top, 0px) + 52px);
}
.bar{display:flex;justify-content:center;align-items:center;gap:10px;
  height:52px;padding:0 16px;}
.bar h1{font-size:1.4rem;font-weight:700;margin:0;}
/* =========================================================
   CABECERA
========================================================= */
/* ... (reglas existentes) ... */
.bar {
  display:flex;
  justify-content:center;
  align-items:center;
  gap: 10px;
  height:52px;
  padding:4px 16px;
}

.bar h1 {
  display: flex; /* <-- NUEVO: Habilita flexbox para alinear el icono */
  align-items: center; /* <-- NUEVO: Centra el icono y el texto verticalmente */
  /* ... (otras reglas de title) ... */
}
.bar h1 img {
  width: 32px; /* Define el tamaño del icono */
  height: 32px;
  margin-right: 8px; /* Espacio entre el icono y el texto "ABCD²" */
}
.pill-top{
  display:inline-flex; align-items:center; justify-content:center;
  min-width:38px; height:25px; padding:6px 10px;
  border-radius:999px; font-size:13px; font-weight:700;
  border:1px solid transparent; background:#dbeafe; color:#1e3a8a;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.pill-top.tone-green{background:#dcfce7;color:#065f46;border-color:#86efac}
.pill-top.tone-amber{background:#fef3c7;color:#92400e;border-color:#fde68a}
.pill-top.tone-red{background:#fee2e2;color:#991b1b;border-color:#fecaca}


/* INTRO */
.intro{max-width:980px;margin-inline:auto;padding:52px 16px 0;color:var(--muted);
  font-size:.95rem;line-height:1.45;text-align:justify;}
.intro strong{color:var(--accent);}

/* === CONTENIDO === */
body{margin:0;background:var(--bg);color:var(--ink);font-family:Verdana, Geneva, sans-serif;}

.wrap{max-width:980px;margin:16px auto 48px;padding:12px 16px;}
.card{background:#fff;border:1px solid var(--borde);border-radius:16px;
      box-shadow:0 2px 10px rgba(15,23,42,.06);padding:18px;margin-bottom:16px;}
label{font-weight:900;color:#0b1f44;margin-top:8px;display:block;}
select{width:100%;padding:10px 12px;border:1px solid #cbd5e1;border-radius:10px;background:#fff;font-size:14px;}
select:focus{border:1px solid #0f3d83;}
.row{display:grid;grid-template-columns:1fr;gap:10px}
@media (min-width:560px){.row{grid-template-columns:1fr 1fr 1fr}}

.scoreline{font-weight:600;font-size:16px;color:var(--ink);margin-top:10px;background:#fff;border:1px solid #cbd5e1;border-radius:16px;
      box-shadow:0 2px 10px rgba(15,23,42,.06);padding:18px;margin-bottom:16px;}
.score{font-weight:800;color:var(--azul)}
.pill{display:inline-block;padding:4px 10px;margin-left:8px;border-radius:999px;
      font-weight:700;color:#fff}
.pill.leve{background:var(--ok)}
.pill.moderado{background:var(--warn)}
.pill.grave{background:var(--bad)}


/* === BOTONES === */
.actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:18px;}
.btn-action{
  flex:1 1 48%;border:none;border-radius:10px;padding:12px;
  font-size:15px;font-weight:700;cursor:pointer;transition:background .2s;
}
.btn-clear {background:#fff; color:#0b2c5f; border:1px solid #2563eb;}
.btn-clear:hover {background:#eff6ff;}
.btn-copy {background:#fff; color:#0f3d83; border:1px solid #2563eb; }
.btn-copy:hover {background:#eff6ff;}

.btn-copy.copiado{background:#0f3d83!important;color:#fff!important;}


#resumenText{white-space:pre-wrap;font-size:13px;color:#0f172a;margin-top:8px;
             border:1px dashed var(--borde);border-radius:10px;padding:10px;background:#f8fafc}
.note{color:var(--gris);font-size:12px;margin-top:12px}

footer.smallprint{text-align:center;margin-top:2rem;padding:1rem 0;
                  border-top:1px solid #e5e7eb;background:#ffffff}
footer img{max-width:320px;height:auto;opacity:.95}

@media(max-width:768px){
  header{font-size:1.05rem;}
  main{padding:0.9rem 1rem;}
  body{font-size:0.96rem;}
}

</style>


</head>

<body>

<div class="safe-top">
  <div class="safe-content">
    <div class="safe-left">
      <img src="../iconos/escalasico.png" alt="Icono Escalas" class="safe-mini">
      <img src="../img/topbar.png" alt="IctusGPS" class="safe-logo">
    </div>
    <div class="safe-actions">
      <a href="javascript:history.back()" class="safe-btn"><img src="../iconos/atrastransparente.png" class="safe-icon" alt="Atrás"></a>
      <a href="../index.html" class="safe-btn"><img src="../iconos/hometransparente.png" class="safe-icon" alt="Inicio"></a>
    </div>
  </div>
</div>

<header>
  <div class="bar">
    <h1><img src="../iconos/glasgow.png" alt="Glasgow">Glasgow</h1>
      <output id="pillTop" class="pill-top" aria-live="polite" aria-atomic="true">GCS —</output>
  </div>
</header>

<main class="wrap">
<section class="intro">
  <p>Evalúa el <b>nivel de conciencia</b> de un paciente, midiendo la <b>respuesta ocular, verbal y motora</b>. La puntuación total (3-15) permite monitorizar el estado neurológico y clasificar la gravedad de la lesión cerebral (leve, moderada o grave).</p>
</section>

<div class="container">
  <div class="card">
    <div class="row">
      <div>
        <label for="e">Apertura <u>O</u>cular</label>
        <select id="e">
          <option value="4">4 – Espontánea</option>
          <option value="3">3 – A la voz</option>
          <option value="2">2 – Al dolor</option>
          <option value="1">1 – Ninguna</option>
        </select>
      </div>
      <div>
        <label for="v">Respuesta <u>V</u>erbal</label>
        <select id="v">
          <option value="5">5 – Orientado</option>
          <option value="4">4 – Confuso</option>
          <option value="3">3 – Palabras inapropiadas</option>
          <option value="2">2 – Sonidos incomprensibles</option>
          <option value="1">1 – Ninguna</option>
        </select>
      </div>
      <div>
        <label for="m">Respuesta <u>M</u>otora</label>
        <select id="m">
          <option value="6">6 – Obedece órdenes</option>
          <option value="5">5 – Localiza dolor</option>
          <option value="4">4 – Retira ante dolor</option>
          <option value="3">3 – Flexión anormal</option>
          <option value="2">2 – Extensión</option>
          <option value="1">1 – Ninguna</option>
        </select>
      </div>
    </div>

    <div class="scoreline" id="resultado">
      GCS: <span class="score" id="out">—</span>
      <span class="pill" id="band">—</span>
    </div>

<div class="actions">
      <button id="btnClear" class="btn-action btn-clear">Borrar</button>
      <button id="btnCopy" class="btn-action btn-copy">Copiar resumen</button>
    </div>


    <div id="resumenText"></div>
  </div>

</div>
</main>

<script>
function tone(t){if(t>=13)return"tone-green";if(t>=9)return"tone-amber";return"tone-red";}
function clasificar(t){
  if(t>=13)return{label:"Leve",css:"leve",range:"13–15"};
  if(t>=9)return{label:"Moderado",css:"moderado",range:"9–12"};
  return{label:"Grave",css:"grave",range:"3–8"};
}
function updateHeaderPill(t,band){
  const pill=document.getElementById('pillTop');
  pill.classList.remove('tone-green','tone-amber','tone-red');
  if(typeof t!=='number'||isNaN(t)){pill.textContent='GCS —';return;}
  const toneClass=tone(t);
  pill.classList.add(toneClass);
  pill.textContent=`GCS ${t} — ${band}`;
}
function calc(){
  const e=+document.getElementById('e').value;
  const v=+document.getElementById('v').value;
  const m=+document.getElementById('m').value;
  const t=e+v+m;
  const band=clasificar(t);
  document.getElementById('out').textContent=`${t} (O${e} V${v} M${m})`;
  const pill=document.getElementById('band');
  pill.textContent=`${band.label} (${band.range})`;
  pill.className=`pill ${band.css}`;
  updateHeaderPill(t,band.label);

  let resumen=`Escala de Glasgow: ${t} puntos (${band.label}).\n`;
  resumen+=`Detalle: O${e} + V${v} + M${m} = ${t}.\n`;
  if(band.label==="Leve")resumen+="Interpretación: nivel de conciencia conservado o mínima afectación.";
  else if(band.label==="Moderado")resumen+="Interpretación: compromiso moderado, riesgo de deterioro neurológico.";
  else resumen+="Interpretación: coma grave; requiere control intensivo y valoración urgente de causas reversibles.";
  document.getElementById('resumenText').textContent=resumen;
}
function borrar(){['e','v','m'].forEach(id=>document.getElementById(id).selectedIndex=0);calc();}
function copiar(){
  const t=document.getElementById('resumenText').textContent.trim();
  if(!t)return;
  navigator.clipboard.writeText(t).then(()=>{
    const b=document.getElementById('btnCopy');
    b.classList.add('copiado');b.textContent='Copiado';
    setTimeout(()=>{b.classList.remove('copiado');b.textContent='Copiar resumen';},3000);
  });
}
document.querySelectorAll('select').forEach(s=>s.addEventListener('change',calc));
document.getElementById('btnCopy').addEventListener('click',copiar);
document.getElementById('btnClear').addEventListener('click',borrar);
document.addEventListener('DOMContentLoaded',calc);
</script>

<footer class="smallprint">
  <img src="uibanner.png" alt="Unidad de Ictus Málaga">
</footer>
<script src="js/index.js"></script>
</body>
</html>
