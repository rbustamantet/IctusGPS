<!DOCTYPE html>
<html lang="es">
  <head>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Clasificaci√≥n TOAST - Ictus Isqu√©mico</title>
    <link rel="manifest" href="../site.webmanifest">
    <link rel="icon" type="image/png" sizes="192x192"
      href="../iconos/ictusgps.png">
    <link rel="apple-touch-icon" sizes="180x180"
      href="../iconos/ictusgps.png">
    <link rel="shortcut icon" href="../iconos/ictusgps.png">
    <meta name="theme-color" content="#0f3d83">
    <style>
:root{
  --bg:#f8fafc; --ink:#0f172a; --borde:#e5e7eb;
  --azul:#0b2c5f; --gris:#6b7280;
  --accent:#2563eb; --accent-light:#dbeafe;
  --toast-orange:#f57c00;
  --ok:#166534; --ok-bg:#e9fce7; --ok-ring:#bbf7d0;
  --mid:#92400e; --mid-bg:#fff7ed; --mid-ring:#fed7aa;
  --bad:#991b1b; --bad-bg:#fef2f2; --bad-ring:#fecaca;
  --accent-dark:#0f3d83;
  --border:#e5e9f2;
  --muted:#64748b;
  --azul-institucional:#0f3d83;
}
*{box-sizing:border-box}

/* =========================================================
   SAFE-TOP
========================================================= */
.safe-top {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: calc(env(safe-area-inset-top, 0px) + 60px);
  background: var(--azul-institucional);
  z-index: 1001;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding-top: env(safe-area-inset-top, 0px);
}
.safe-content {
  width: 100%;
  max-width: 1080px;
  padding: 6px 16px 8px;
  display: flex;
  justify-content: space-between;
  align-items: flex-start; 
  /* A√±adir un padding-top para empujar los iconos ligeramente hacia abajo y no pegarlos al borde */
  padding-top: 5px; /* Ajuste manual para bajar los iconos un poco */
  padding-bottom: 0; /* Eliminar padding inferior para reservar ese espacio */
}
.safe-left {
  display: flex;
  align-items: center;
  gap: 10px;
}
.safe-mini {
  width: 44px;
  height: 44px;
  object-fit: contain;
  padding: 4px;
  box-shadow: 0 0 4px rgba(0,0,0,0.1);
}
.safe-logo {
  height: 44px;
  width: auto;
}
.safe-actions {
  display: flex;
  gap: 10px;
}
.safe-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: rgba(255,255,255,0.15);
  border: 1px solid white;
  border-radius: 50%;
  transition: background .25s, border-color .25s, transform .1s;
}
.safe-btn:hover {
  background: #01c5fe;
  border: 1px solid white;
}
.safe-btn:active { transform: scale(0.95); }
.safe-icon {
  width: 32px;
  height: 32px;
  object-fit: contain;
}
/* =========================================================
   CABECERA INFERIOR (STICKY)
========================================================= */
header {
  position: sticky;
  top: calc(env(safe-area-inset-top, 0px) + 52px);
  z-index: 1002;
  backdrop-filter: blur(6px);
  background: var(--accent-dark);
  border-bottom: 1px solid rgba(255,255,255,.08);
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  color: #fff;
}
.bar {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
  height: 52px;
  padding: 0 16px;
}
.title {
  font-size: 1.4rem;
  font-weight: 700;
  color: #fff;
}
/* =========================================================
   CABECERA
========================================================= */
/* ... (reglas existentes) ... */
.bar {
  display:flex;
  justify-content:center;
  align-items:center;
  gap: 10px;
  height:52px;
  padding:4px 16px;
}

.title {
  display: flex; /* <-- NUEVO: Habilita flexbox para alinear el icono */
  align-items: center; /* <-- NUEVO: Centra el icono y el texto verticalmente */
  /* ... (otras reglas de title) ... */
}
.title img {
  width: 32px; /* Define el tama√±o del icono */
  height: 32px;
  margin-right: 8px; /* Espacio entre el icono y el texto "ABCD¬≤" */
}
.pill{
  display:inline-flex; align-items:center; justify-content:center;
  min-width:38px; height:25px; padding:6px 10px;
  border-radius:999px; font-size:13px; font-weight:700;
  border:1px solid transparent; background:#dbeafe; color:#1e3a8a;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* INTRO */
.howto{
  background:#fff;
  border:1px solid var(--borde);
  border-radius:14px;
  box-shadow:0 2px 2px var(--muted);
  padding:.5rem;
  margin:.5rem 0 1rem;
  font-size:14px;
}

/* ===== CUERPO ===== */
body{margin:0;background:var(--bg);color:var(--ink);font-family:Verdana, Geneva, Tahoma, sans-serif;}
.wrap{max-width:980px;margin:16px auto 48px;padding:2px 16px;}
.panel{background:#fff;border:1px solid var(--borde);border-radius:16px;padding:16px;box-shadow:0 2px 10px rgba(15,23,42,.06);}

label{font-weight:900;color:#0b1f44;margin-top:8px;display:block;}
select{width:100%;padding:10px 12px;border:1px solid #cbd5e1;border-radius:10px;background:#fff;font-size:14px;}
select:focus{outline:none;box-shadow:0 0 0 3px #dbeafe;}
.note{color:#64748b;font-size:12px;margin-top:8px;}

/* ===== RESULTADOS ===== */
.card{margin-top:16px;background:#fff;border:1px solid var(--borde);border-radius:16px;padding:14px;box-shadow:0 2px 10px rgba(15,23,42,.06)}
.kpi-title{font-size:1.1rem;font-weight:800;color:var(--azul);margin:0 0 8px;border-bottom:1px dashed #bfdbfe;padding-bottom:6px}
.conclusion{font-size:1.15rem;font-weight:800;color:var(--azul);margin:6px 0}
.criteria{white-space:pre-wrap;font-size:.95rem;color:#0f172a}
.note-warn{margin-top:10px;font-size:.95rem;color:#92400e;background:#fff7ed;border-left:4px solid var(--toast-orange);padding:8px 10px;border-radius:8px}

/* Segunda tarjeta */
#resumenText{
  white-space:pre-wrap;font-size:13px;color:#0f172a;margin-top:8px;
  border:1px dashed var(--borde);border-radius:10px;padding:10px 12px;
  background:#f8fafc;line-height:1.45;
}

/* ===== BOTONES ===== */
.actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px;}
.btn-action{
  flex:1 1 48%;
  border:1px solid #2563eb;border-radius:10px;padding:12px;
  background:#fff;color:#0f3d83;font-size:15px;font-weight:700;cursor:pointer;
  transition:background .2s;
}
.btn-action:hover{background:#eff6ff;}
.btn-copy.copiado{background:#0f3d83!important;color:#fff!important;}

/* ===== BLOQUES COLAPSABLES ===== */
details.toast-collapsible{
  border:1px solid var(--borde);
  border-radius:12px; background:#fff; margin-top:12px;
}
details.toast-collapsible > summary{
  list-style:none; user-select:none; cursor:pointer;
  display:flex; align-items:center; gap:8px;
  padding:12px 14px; font-weight:800; color:#0b1f44;
  border-bottom:1px solid #eef2f7; background:#eef6ff;
}
details[open].toast-collapsible > summary{ border-bottom-color:#e5edf9; }
details.toast-collapsible .inner{ padding:12px 6px; }

/* Icono caret */
summary .caret{ display:inline-block; width:1em; text-align:center; font-weight:900; }
details[open] summary .caret{ transform:rotate(90deg); }

/* Abierto en escritorio, cerrado en m√≥vil por JS (con media listener) */

/* ===== TABLA CLAVES ===== */
.table-wrap{overflow-x:auto;}
.table{width:100%; border-collapse:collapse; font-size:10px; background:#fff;}
.table th, .table td{border:1px solid #e5e7eb; padding:5px; vertical-align:top;}
.table th{background:#f1f5ff; color:#0b1f44; text-align:left;}
.table tr:nth-child(even) td{background:#f9fbff;text-align:left;}
.table b{font-weight:800;}

/* =========================================================
   PADDING SUPERIOR DEL CONTENIDO
========================================================= */

/* Empuja el contenido real por debajo de la barra superior */
body {
  margin: 0;
  padding-top: calc(env(safe-area-inset-top, 0px) + 52px);
  background-color: #fff;
}

@media(max-width:768px){
  header{font-size:1.05rem;}
  main{padding:0.9rem 1rem;}
  body{font-size:0.96rem;}
}

 /* Pie */
footer{
  width:100%;
  margin:2rem 0 0;
  padding:1.5rem 0;
  border-top:1px solid #e5e7eb;
  background:#ffffff;
  text-align:center;
  box-shadow:0 -2px 6px rgba(0,0,0,0.04);
}
footer img{max-width:320px;height:auto;opacity:.95}
</style>
  </head>
  <body>
    <!-- SAFE-TOP -->
    <div class="safe-top">
      <div class="safe-content">
        <div class="safe-left"> <img src="../iconos/escalasico.png"
            alt="Icono Escalas" class="safe-mini"> <img
            src="../img/topbar.png" alt="IctusGPS" class="safe-logo"> </div>
        <div class="safe-actions"> <a href="javascript:history.back()"
            class="safe-btn" title="Volver atr√°s"> <img
              src="../iconos/atrastransparente.png" alt="Atr√°s"
              class="safe-icon"> </a> <a href="../index.html"
            class="safe-btn" title="Volver al inicio"> <img
              src="../iconos/hometransparente.png" alt="Inicio"
              class="safe-icon"> </a> </div>
      </div>
    </div>
    <header>
      <div class="bar">
        <div class="title"><img src="../iconos/toast.png" alt="TOAST">TOAST</div>
        <output id="pill" class="pill" aria-live="polite"
          aria-atomic="true">‚Äî</output> </div>
    </header>
    <main class="wrap">
      <div align="justify">
        <section class="howto">La clasificaci√≥n <b>TOAST (Trial of Org
            10172 in Acute Stroke Treatment)</b> es un sistema <b>etiol√≥gico</b>
          utilizado para categorizar el subtipo de infarto cerebral
          isqu√©mico, bas√°ndose en la causa subyacente. Define cinco
          categor√≠as principales (Aterosclerosis de gran vaso,
          Cardioembolismo, Oclusi√≥n de peque√±o vaso/Lacunar, Ictus de
          otra etiolog√≠a e Ictus de etiolog√≠a indeterminada). Su
          prop√≥sito principal es <b>homogeneizar la clasificaci√≥n de
            los ictus en ensayos cl√≠nicos</b>
        </section>
      </div>
      <section class="panel" aria-labelledby="title-to">
        <p class="note">Seleccione las condiciones diagn√≥sticas m√°s
          probables seg√∫n estudios cl√≠nicos e imagenol√≥gicos.</p>
        <div class="grid">
          <div> <label for="lvo">1. Lesi√≥n Arterial Ateroscler√≥tica
              (LAA)</label>
            <select id="lvo">
              <option value="" selected="selected">Selecciona‚Ä¶</option>
              <option value="none">Sin estenosis significativa ni placa
                de riesgo ipsilateral</option>
              <option value="probable">Placa ateroscler√≥tica ulcerada o
                irregular (&lt;50%)</option>
              <option value="definite">Estenosis ‚â•50%/placa compleja
                relevante</option>
            </select>
            <p class="note">Incluye car√≥tida, M1, vertebral o basilar.</p>
          </div>
          <div> <label for="cardiac">2. Fuente Cardioemb√≥lica</label>
            <select id="cardiac">
              <option value="" selected="selected">Selecciona‚Ä¶</option>
              <option value="none">No identificada</option>
              <option value="definite">Alto riesgo (FA, trombo mural,
                pr√≥tesis mec√°nica, EM severa)</option>
              <option value="minor">Riesgo menor/moderado (FOP,
                aneurisma septal, etc.)</option>
            </select>
          </div>
          <div> <label for="lacunar">3. Hallazgos Lacunares</label>
            <select id="lacunar">
              <option value="" selected="selected">Selecciona‚Ä¶</option>
              <option value="none">No</option>
              <option value="definite">Infarto lacunar t√≠pico (&lt;1.5
                cm, perforantes)</option>
            </select>
          </div>
          <div> <label for="other">4. Otras Etiolog√≠as Definidas</label>
            <select id="other">
              <option value="" selected="selected">Selecciona‚Ä¶</option>
              <option value="none">No</option>
              <option value="definite">S√≠ (disecci√≥n, vasculitis,
                trombofilia, vasoespasmo, etc.)</option>
            </select>
          </div>
        </div>
        <div id="err" class="note-warn"
          style="display:none;margin-top:12px"></div>
      </section>
      <!-- Tarjeta principal de resultados -->
      <section class="card" id="resultCard" style="display:none">
        <h3 class="kpi-title">Clasificaci√≥n TOAST Final</h3>
        <div class="conclusion" id="toastConclusion">‚Äî</div>
        <div class="criteria" id="toastCriterios">‚Äî</div>
        <div class="note-warn" id="toastNote" style="display:none"></div>
        <div class="actions"> <button id="btnBorrar" class="btn-action"
            type="button">Borrar</button> <button id="btnCopy"
            class="btn-action btn-copy" type="button">Copiar resumen</button>
        </div>
      </section>
      <!-- Tarjeta secundaria (Resumen listo para HCE) -->
      <section class="card" id="secondaryCard" style="display:none">
        <h3 class="kpi-title">Resumen para historia cl√≠nica</h3>
        <div id="resumenText"></div>
      </section>
      <!-- Colapsable 1: Criterios TOAST detallados -->
      <details class="toast-collapsible" id="colCriteria">
        <summary><span class="caret">‚ñ∏</span> Criterios TOAST
          (detallados)</summary>
        <div class="inner">
          <ul style="font-size:12px;">
            <li><b>LAA </b>(Aterosclerosis de gran arteria): estenosis
              ‚â•50% o placa compleja ipsilateral al evento; sin fuente
              cardioemb√≥lica de alto riesgo.</li>
            <li><b>CE </b>(Cardioembolismo): fuente card√≠aca de alto
              riesgo (FA, trombo mural, pr√≥tesis mec√°nica, EM severa)
              sin LAA significativa.</li>
            <li><b>SVO </b>(Peque√±o vaso): infarto lacunar t√≠pico
              (&lt;1.5 cm) en territorio perforante; sin LAA ‚â•50% ni CE
              alto riesgo.</li>
            <li><b>ODE </b>(Otra etiolog√≠a definida): causa espec√≠fica
              (p. ej., disecci√≥n, vasculitis, trombofilia, vasoespasmo,
              etc.).</li>
            <li><b>UE </b>(Indeterminada/Criptog√©nico): indeterminada
              (sin causa, m√∫ltiples posibles o evaluaci√≥n incompleta).</li>
          </ul>
          <p class="note" style="margin-top:6px">TOAST: Trial of Org
            10172 in Acute Stroke Treatment.</p>
        </div>
      </details>
      <!-- Colapsable 2: Claves diagn√≥sticas y diferenciales (TABLA) -->
      <details class="toast-collapsible" id="colTable">
        <summary><span class="caret">‚ñ∏</span> ü©ª Claves diagn√≥sticas y
          diferenciales</summary>
        <div class="inner">
          <div class="table-wrap">
            <table class="table" aria-label="Claves diagn√≥sticas y
              diferenciales">
              <thead> <tr>
                  <th>Tipo</th>
                  <th>Imagen</th>
                  <th>Cl√≠nica</th>
                  <th>Diagn√≥stico diferencial</th>
                </tr>
              </thead> <tbody>
                <tr>
                  <td><b>LAA</b></td>
                  <td>Estenosis ‚â•50% o placa ulcerada en arteria
                    relevante (car√≥tida, M1, basilar, vertebral)</td>
                  <td>Ictus cortical o subcortical extenso, territorial;
                    posible progresi√≥n/fluctuaci√≥n</td>
                  <td>CE si embolismo distal; SVO si infarto peque√±o sin
                    estenosis significativa</td>
                </tr>
                <tr>
                  <td><b>CE</b></td>
                  <td>Infartos corticales o multiterritoriales;
                    transformaci√≥n hemorr√°gica temprana m√°s frecuente</td>
                  <td>Inicio s√∫bito con d√©ficit m√°ximo desde el
                    comienzo; antecedentes de FA/fuente cardiaca</td>
                  <td>LAA si estenosis proximal; UE/ESUS si no hay
                    fuente definida</td>
                </tr>
                <tr>
                  <td><b>SVO</b></td>
                  <td>Infarto profundo &lt;1.5 cm (n√∫cleos, c√°psula
                    interna, t√°lamo, protuberancia)</td>
                  <td>S√≠ndromes lacunares: motor/sensitivo puro, sin
                    signos corticales</td>
                  <td>LAA si infarto mayor con estenosis; CE si
                    embolismo distal en perforantes</td>
                </tr>
                <tr>
                  <td><b>ODE</b></td>
                  <td>Disecci√≥n, vasculitis, trombosis venosa,
                    trombofilia, vasoespasmo‚Ä¶</td>
                  <td>Variable seg√∫n causa subyacente</td>
                  <td>Descartar LAA/CE/SVO si no se confirma la
                    etiolog√≠a espec√≠fica</td>
                </tr>
                <tr>
                  <td><b>UE</b></td>
                  <td>No espec√≠fico; a veces patr√≥n emb√≥lico</td>
                  <td>Estudios negativos o m√°s de una causa posible</td>
                  <td>ESUS, LAA leve o CE menor no confirmados</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </details>
    </main>
    <script>
(function(){
  const $ = id => document.getElementById(id);
  const pill = $('pill');
  const err  = $('err');
  const resultCard = $('resultCard');
  const secondaryCard = $('secondaryCard');
  const concl = $('toastConclusion');
  const crit  = $('toastCriterios');
  const note  = $('toastNote');
  const resumen = $('resumenText');
  const btnCopy = $('btnCopy');

  // üé® COLORES POR ETIOLOG√çA (para p√≠ldora, tarjeta y nota)
  const tone = {
    'LAA': {bg:'#dcfce7', color:'#166534', border:'#bbf7d0'},
    'CE':  {bg:'#fef9c3', color:'#92400e', border:'#fde68a'},
    'SVO': {bg:'#dbeafe', color:'#1e3a8a', border:'#bfdbfe'},
    'ODE': {bg:'#fee2e2', color:'#991b1b', border:'#fecaca'},
    'UE':  {bg:'#f9fafb', color:'#334155', border:'#e2e8f0'},
    '‚Äî':   {bg:'#e6f0ff', color:'#123f8b', border:'#86b6ff'}
  };

  function colorize(abbrev){
    const t = tone[abbrev] || tone['‚Äî'];
    // P√≠ldora
    pill.style.background = t.bg;
    pill.style.color = t.color;
    pill.style.borderColor = t.border;
    // Tarjeta principal
    resultCard.style.borderColor = t.border;
    resultCard.style.background = t.bg;
    // Nota (si est√° visible)
    if (note.style.display === 'block') {
      note.style.borderLeftColor = t.border;
      note.style.background = t.bg;
      note.style.color = t.color;
    }
  }

  function updatePill(abbrev){
    pill.textContent = '' + (abbrev || '‚Äî');
    colorize(abbrev);
  }

  function buildSummary(classification, criteriaText){
    const lvo = $('lvo').options[$('lvo').selectedIndex].text;
    const ce  = $('cardiac').options[$('cardiac').selectedIndex].text;
    const lac = $('lacunar').options[$('lacunar').selectedIndex].text;
    const oth = $('other').options[$('other').selectedIndex].text;
    let s = 'Clasificaci√≥n TOAST ‚Äî Resumen\n';
    s += '===================\n';
    s += 'Clasificaci√≥n final: ' + classification + '\n\n';
    s += 'Criterios aplicados:\n' + criteriaText.replaceAll('‚Äî ','- ') + '\n\n';
    s += 'Selecci√≥n en formulario:\n';
    s += `- LAA: ${lvo}\n- Cardioembolia: ${ce}\n- Lacunar: ${lac}\n- Otra etiolog√≠a: ${oth}\n`;
    if (note.style.display === 'block') s += '\nNota: ' + note.textContent + '\n';
    return s;
  }

  function classify(){
    err.style.display='none';
    note.style.display='none';
    const lvo=$('lvo').value, ce=$('cardiac').value, lac=$('lacunar').value, oth=$('other').value;
    if([lvo,ce,lac,oth].some(v=>v==='')){
      resultCard.style.display='none'; secondaryCard.style.display='none';
      updatePill('‚Äî'); err.textContent='Complete todas las selecciones.'; err.style.display='block'; return;
    }

    let conclusion='', criterios=[], abbrev='‚Äî';

    if(oth==='definite'){
      conclusion='Ictus de Otra Etiolog√≠a Determinada (ODE)';
      criterios.push('Causa espec√≠fica identificada (disecci√≥n, vasculitis, trombofilia, vasoespasmo, etc.).');
      note.innerHTML='Aunque puedan coexistir factores ateroscler√≥ticos o cardiacos menores, la presencia de una causa espec√≠fica determina la clasificaci√≥n como <b>ODE</b>.';
      note.style.display='block'; abbrev='ODE';
    }
    else if(lvo==='definite' && ce!=='definite'){
      conclusion='Aterosclerosis de Gran Arteria (LAA)';
      criterios.push('Estenosis ‚â•50% o placa compleja relevante, sin fuente cardioemb√≥lica de alto riesgo.'); abbrev='LAA';
    }
    else if(ce==='definite' && lvo!=='definite'){
      conclusion='Cardioembolismo (CE)';
      criterios.push('Fuente cardiaca de alto riesgo (FA, trombo mural, pr√≥tesis mec√°nica, EM severa) sin LAA significativa.'); abbrev='CE';
    }
    else if(lac==='definite' && (lvo==='none'||lvo==='probable') && (ce==='none'||ce==='minor')){
      conclusion='Oclusi√≥n de Peque√±o Vaso (SVO)';
      criterios.push('Infarto lacunar t√≠pico (<1.5 cm) sin LAA ‚â•50% ni CE alto riesgo.');
      if(lvo==='probable'||ce==='minor'){
        note.innerHTML='Se identifica una causa menor coexistente (p. ej., FOP o placa &lt;50%), pero se mantiene la clasificaci√≥n como <b>SVO</b> por la compatibilidad cl√≠nico-radiol√≥gica.';
        note.style.display='block';
      }
      abbrev='SVO';
    }
    else{
      let nC=0; if(['definite','probable'].includes(lvo))nC++; if(['definite','minor'].includes(ce))nC++;
      if(nC===0){ conclusion='Ictus de Etiolog√≠a Indeterminada (UE) ‚Äî Criptog√©nico puro'; criterios.push('No se identific√≥ ninguna causa mayor.'); }
      else if(nC>=2){ conclusion='Ictus de Etiolog√≠a Indeterminada (UE) ‚Äî Dos o m√°s causas posibles';
        if(lvo!=='none')criterios.push('LAA: probable/definida.'); if(ce!=='none')criterios.push('CE: menor/definida.'); }
      else{ conclusion='Ictus de Etiolog√≠a Indeterminada (UE) ‚Äî Criptog√©nico/ESUS'; criterios.push('Posible mecanismo emb√≥lico (ESUS).'); }
      abbrev='UE';
    }

    concl.textContent=conclusion;
    crit.innerHTML='‚Äî '+criterios.join('<br>‚Äî ');
    resultCard.style.display='block'; secondaryCard.style.display='block';
    resumen.textContent=buildSummary(conclusion, crit.textContent);
    updatePill(abbrev);
  }

  function borrar(){
    ['lvo','cardiac','lacunar','other'].forEach(id=>$(id).selectedIndex=0);
    resultCard.style.display='none'; secondaryCard.style.display='none';
    err.style.display='none'; note.style.display='none';
    updatePill('‚Äî');
// üîµ Scroll al inicio suavemente
  window.scrollTo({
    top: 0,
    behavior: "smooth"
  });
  }

  function copiar(){
    if(resultCard.style.display!=='block')return;
    const txt=resumen.textContent.trim(); if(!txt)return;
    navigator.clipboard.writeText(txt).then(()=>{
      btnCopy.classList.add('copiado'); btnCopy.textContent='Copiado ‚úì';
      setTimeout(()=>{btnCopy.classList.remove('copiado');btnCopy.textContent='Copiar resumen';},1400);
    });
  }

  document.querySelectorAll('select').forEach(s=>s.addEventListener('change',classify));
  $('btnBorrar').addEventListener('click',borrar);
  $('btnCopy').addEventListener('click',copiar);

  // Colapsables abiertos en escritorio
  function setDetailsOpen(){
    const open=window.matchMedia('(min-width:768px)').matches;
    ['colCriteria','colTable'].forEach(id=>{
      const d=$(id); if(!d)return;
      open?d.setAttribute('open',''):d.removeAttribute('open');
    });
  }
  setDetailsOpen(); window.addEventListener('resize',setDetailsOpen);

  // Estado inicial neutro
  updatePill('‚Äî');
})();
</script>
    <footer> <img src="../img/uibanner.png" alt="Ictus GPS">
    </footer>
    <script src="js/index.js"></script>
  </body>
</html>
