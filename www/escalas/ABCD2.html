<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="manifest" href="../site.webmanifest">
<link rel="icon" type="image/png" sizes="192x192" href="../iconos/ictusgps.png">
<link rel="apple-touch-icon" sizes="180x180" href="../iconos/ictusgps.png">
<link rel="shortcut icon" href="../iconos/ictusgps.png">
<meta name="theme-color" content="#0f3d83">
<title>ABCDÂ² â€” Riesgo de ictus tras AIT</title>
<style>
:root{
  --bg:#f8fafc; --ink:#0f172a; --muted:#64748b;
  --card:#ffffff; --ring:#c7dbff; --borde:#dbeafe;
  --ok:#166534; --ok-bg:#e9fce7; --ok-ring:#bbf7d0;
  --mid:#92400e; --mid-bg:#fff7ed; --mid-ring:#fed7aa;
  --bad:#991b1b; --bad-bg:#fef2f2; --bad-ring:#fecaca;
  --accent:#1e3a8a; --accent-soft:#e6f0ff;
}
:root{
  --bg:#f9fafc;
  --ink:#0e1a33;
  --accent-dark:#0f3d83;
  --accent-light:#2563eb;
  --border:#e5e9f2;
  --muted:#64748b;
}
/* =========================================================
   SAFE-TOP
========================================================= */
.safe-top {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: calc(env(safe-area-inset-top, 0px) + 60px);
  background: var(--accent-dark);
  z-index: 1001;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding-top: env(safe-area-inset-top, 0px);
}
.safe-content {
  width: 100%;
  max-width: 1080px;
  padding: 6px 16px 8px;
  display: flex;
  justify-content: space-between;
  align-items: flex-start; 
  /* AÃ±adir un padding-top para empujar los iconos ligeramente hacia abajo y no pegarlos al borde */
  padding-top: 2px; /* Ajuste manual para bajar los iconos un poco */
  padding-bottom: 0; /* Eliminar padding inferior para reservar ese espacio */
}
.safe-left {
  display: flex;
  align-items: center;
  gap: 10px;
}
.safe-mini {
  width: 44px;
  height: 44px;
  object-fit: contain;
  padding: 4px;
  box-shadow: 0 0 4px rgba(0,0,0,0.1);
}
.safe-logo {
  height: 44px;
  width: auto;
}
.safe-actions {
  display: flex;
  gap: 10px;
}
.safe-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: rgba(255,255,255,0.15);
  border: 1px solid white;
  border-radius: 50%;
  transition: background .25s, border-color .25s, transform .1s;
}
.safe-btn:hover {
  background: #01c5fe;
  border: 1px solid white;
}
.safe-btn:active { transform: scale(0.95); }
.safe-icon {
  width: 32px;
  height: 32px;
  object-fit: contain;
}
/* =========================================================
   CABECERA
========================================================= */
/* ==== Cabecera inferior fija al hacer scroll ==== */
header {
  position: sticky;
  top: calc(env(safe-area-inset-top, 0px) + 52px);
  z-index: 1002;
  backdrop-filter: blur(6px);
  background: var(--accent-dark);
  border-bottom: 1px solid rgba(255,255,255,.08);
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  color: #fff;
}

.bar {
  display:flex;
  justify-content:center;
  align-items:center;
  gap: 10px;  /* separa tÃ­tulo y pill */
  height:52px;          /* altura fija coherente con otras cabeceras */
  padding:4px 16px;       /* solo lateral */
}

.title{
  font-size:1.4rem;
  font-weight:700;
  letter-spacing:.2px;
  color:#fff;
  text-align:center;
  text-transform:none; /* ðŸ”¹ estilo oraciÃ³n */
}
/* =========================================================
   CABECERA
========================================================= */
/* ... (reglas existentes) ... */
.bar {
  display:flex;
  justify-content:center;
  align-items:center;
  gap: 10px;
  height:52px;
  padding:4px 16px;
}

.title {
  display: flex; /* <-- NUEVO: Habilita flexbox para alinear el icono */
  align-items: center; /* <-- NUEVO: Centra el icono y el texto verticalmente */
  /* ... (otras reglas de title) ... */
}
.title img {
  width: 32px; /* Define el tamaÃ±o del icono */
  height: 32px;
  margin-right: 8px; /* Espacio entre el icono y el texto "ABCDÂ²" */
}
/* === Pill visible y alineada === */
.pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 38px;
  height: 28px;
  padding: 4px 8px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 700;
  border: 1px solid transparent;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Colores activos segÃºn el riesgo (contraste sobre fondo azul) */
.pill-ok   {background:#dcfce7; color:#065f46; border-color:#86efac;}   /* verde */
.pill-warn {background:#fef3c7; color:#92400e; border-color:#fde68a;}   /* Ã¡mbar */
.pill-bad  {background:#fee2e2; color:#991b1b; border-color:#fecaca;}   /* rojo */



*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);
  font-family:Verdana, Geneva, Tahoma, sans-serif;font-size:15px}
/* INTRO */
.intro{max-width:980px;margin-inline:auto;padding:52px 16px 0;color:var(--muted);
  font-size:.95rem;line-height:1.45;text-align:justify;}
.intro strong{color:var(--accent);}
/* Layout */
.wrap{max-width:950px;margin:14px auto 40px;padding:16px 14px}
.sub{color:var(--muted);margin:2px 0 12px;font-size: 0.9rem}
.panel{background:#fff;border:1px solid var(--borde);border-radius:16px;padding:14px;
       box-shadow:0 8px 22px rgba(31,86,179,.06)}
.grid{display:grid;grid-template-columns:1fr;gap:12px}
@media(min-width:760px){ .grid{grid-template-columns:1fr 1fr} }

label{display:block;font-weight:900;color:#0b1f44;margin:6px 0 6px}
select{width:100%;padding:12px;border-radius:12px;border:2px solid #cfd8ea;background:#fff;font-size:14px}
select:focus{outline:none;box-shadow:0 0 0 4px var(--accent-soft)}

/* Resultados */
.card{margin-top:14px;background:#fff;border:1px solid var(--borde);
      border-radius:16px;padding:14px;box-shadow:0 8px 22px rgba(31,86,179,.07)}
.kpi{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.kpi3{display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px}
@media(min-width:760px){ .kpi3{grid-template-columns:repeat(3,1fr)} }

.box{border:1.5px dashed var(--ring);border-radius:14px;background:#f8fbff;padding:14px;text-align:center}
.ttl{color:#334155;font-weight:800;margin:0 0 6px}
.val{font-size:28px;font-weight:900;color:#0b2c5f}
.mini{font-size:12px;color:var(--muted)}

.ok   {background:var(--ok-bg);  border-color:var(--ok-ring)}
.warn {background:var(--mid-bg); border-color:var(--mid-ring)}
.bad  {background:var(--bad-bg); border-color:var(--bad-ring)}
.ok .val{color:var(--ok)} .warn .val{color:var(--mid)} .bad .val{color:var(--bad)}

.actions {
  display:flex; gap:10px; flex-wrap:wrap;
  margin-top:16px;
}
.btn-action {
  flex:1 1 150px;
  border:none;
  border-radius:10px;
  padding:12px;
  font-size:15px;
  font-weight:700;
  cursor:pointer;
  transition:background .2s, transform .1s;
}
.btn-clear {background:#fff; color:#0b2c5f; border:1px solid #2563eb;}
.btn-clear:hover {background:#eff6ff;}
.btn-copy {background:#fff; color:#0f3d83; border:1px solid #2563eb; }
.btn-copy:hover {background:#eff6ff;}



.actions {
  margin-left: auto;
}
@media(max-width:768px){
  header{font-size:1.05rem;}
  main{padding:0.9rem 1rem;}
  body{font-size:0.96rem;}
}


</style>


</head>
<body>
 <!-- Barra superior segura -->
<div class="safe-top">
  <div class="safe-content">
    <div class="safe-left">
      <img src="../iconos/escalasico.png" alt="Icono Escalas" class="safe-mini">
      <img src="../img/topbar.png" alt="IctusGPS" class="safe-logo">
    </div>

    <div class="safe-actions">
      <a href="javascript:history.back()" class="safe-btn" title="Volver atrÃ¡s">
        <img src="../iconos/atrastransparente.png" alt="AtrÃ¡s" class="safe-icon">
      </a>
      <a href="../index.html" class="safe-btn" title="Volver al inicio">
        <img src="../iconos/hometransparente.png" alt="Inicio" class="safe-icon">
      </a>
    </div>
  </div>
</div>
<header>
Â  <div class="bar">
Â  Â  <div class="title">
        <img src="../iconos/abcd2.png" alt="ABCD2">
        ABCDÂ²
    </div>
    <output id="pill" class="pill" aria-live="polite" aria-atomic="true" aria-label="PuntuaciÃ³n ABCDÂ²">â€”</output>
Â  </div>
</header>




<main class="wrap">
<section class="intro">
  <p>Herramienta clÃ­nica para estimar el <b>riesgo de sufrir un ictus isquÃ©mico en los dÃ­as siguientes a un Ataque IsquÃ©mico Transitorio</b>. Su resultado clasifica el riesgo como <b>Bajo, Moderado o Alto</b>, guiando la urgencia del estudio etiolÃ³gico y el manejo clÃ­nico para prevenir un ictus inminente.</p>
</section>
    <section class="panel">
    <div class="grid">
      <div><label for="a">Edad â‰¥ 60 aÃ±os</label>
        <select id="a"><option value="0">No (0)</option><option value="1">SÃ­ (1)</option></select>
      </div>
      <div><label for="b">TensiÃ³n arterial inicial â‰¥ 140/90</label>
        <select id="b"><option value="0">No (0)</option><option value="1">SÃ­ (1)</option></select>
      </div>
      <div><label for="c">ClÃ­nica</label>
        <select id="c">
          <option value="0">Otro (0)</option>
          <option value="1">DÃ©ficit del habla sin paresia (1)</option>
          <option value="2">Debilidad unilateral (2)</option>
        </select>
      </div>
      <div><label for="d">DuraciÃ³n</label>
        <select id="d">
          <option value="0">&lt; 10 min (0)</option>
          <option value="1">10â€“59 min (1)</option>
          <option value="2">â‰¥ 60 min (2)</option>
        </select>
      </div>
      <div><label for="di">Diabetes</label>
        <select id="di"><option value="0">No (0)</option><option value="1">SÃ­ (1)</option></select>
      </div>
    </div>

    <div id="resultCard" class="card" role="region" aria-live="polite" aria-atomic="true">
      <div class="kpi">
        <div class="box">
          <div class="ttl">PuntuaciÃ³n ABCDÂ²</div>
          <div class="val" id="scoreVal">â€”</div>
          <div class="mini">Rango: 0â€“7</div>
        </div>
        <div class="box" id="boxCat">
          <div class="ttl">Riesgo</div>
          <div class="val" id="riskLabel">â€”</div>
          <div class="mini">Bajo 0â€“3 Â· Moderado 4â€“5 Â· Alto 6â€“7</div>
        </div>
      </div>
      <div class="kpi3">
        <div class="box" id="risk2"><div class="ttl">Riesgo a 2 dÃ­as</div><div class="val" id="p2">â€”</div></div>
        <div class="box" id="risk7"><div class="ttl">Riesgo a 7 dÃ­as</div><div class="val" id="p7">â€”</div></div>
        <div class="box" id="risk90"><div class="ttl">Riesgo a 90 dÃ­as</div><div class="val" id="p90">â€”</div></div>
      </div>

      <div class="actions">
        <button id="btnClear" class="btn-action btn-clear">Borrar</button>
        <button id="btnCopy" class="btn-action btn-copy">Copiar resumen</button>
      </div>
    </div>
  </section>
</main>

<script>
const RISK_MAP = {
  bajo:     {p2:'1,0 %', p7:'1,2 %', p90:'3,1 %'},
  moderado: {p2:'4,1 %', p7:'5,9 %', p90:'9,8 %'},
  alto:     {p2:'8,1 %', p7:'11,7 %', p90:'17,8 %'}
};

function clasePorCat(cat){ return cat==='Bajo'?'ok':cat==='Moderado'?'warn':'bad'; }
function clasePill(cat){ return cat==='Bajo'?'pill-ok':cat==='Moderado'?'pill-warn':'pill-bad'; }

function calc(){
  const v=id=>Number(document.getElementById(id).value||0);
  const t=v('a')+v('b')+v('c')+v('d')+v('di');
  let cat='Bajo'; if(t>=4&&t<=5)cat='Moderado'; if(t>=6)cat='Alto';

  document.getElementById('scoreVal').textContent=t;
  document.getElementById('riskLabel').textContent=cat;

  const boxCat=document.getElementById('boxCat');
  boxCat.classList.remove('ok','warn','bad');
  boxCat.classList.add(clasePorCat(cat));

  const m=(cat==='Bajo')?RISK_MAP.bajo:(cat==='Moderado'?RISK_MAP.moderado:RISK_MAP.alto);
  document.getElementById('p2').textContent=m.p2;
  document.getElementById('p7').textContent=m.p7;
  document.getElementById('p90').textContent=m.p90;
  ['risk2','risk7','risk90'].forEach(id=>{
    const el=document.getElementById(id);
    el.classList.remove('ok','warn','bad');
    el.classList.add(clasePorCat(cat));
  });

  const pill=document.getElementById('pill');
  if(pill){ pill.className='pill '+clasePill(cat); pill.textContent=String(t); }

  return {t,cat,m};
}

function borrar(){
  ['a','b','c','d','di'].forEach(id=>document.getElementById(id).value='0');
  calc();
}

function copiar(){
  const {t,cat,m}=calc();
  let texto=`PuntuaciÃ³n ABCDÂ²: ${t} (${cat}). `;

  if(cat==='Bajo'){
    texto+=`El riesgo de ictus tras un AIT es bajo, con una probabilidad estimada de ${m.p2} a 2 dÃ­as, ${m.p7} a 7 dÃ­as y ${m.p90} a 90 dÃ­as. ` +
            `El paciente puede valorarse de forma ambulatoria, siempre que no existan otros factores de alto riesgo clÃ­nico o imagenolÃ³gicos.`;
  }else if(cat==='Moderado'){
    texto+=`El riesgo es moderado: ${m.p2} a 2 dÃ­as, ${m.p7} a 7 dÃ­as y ${m.p90} a 90 dÃ­as. ` +
            `Debe considerarse observaciÃ³n hospitalaria o estudio urgente, especialmente si recurren sÃ­ntomas o hay lesiones isquÃ©micas recientes en neuroimagen.`;
  }else{
    texto+=`El riesgo es alto: ${m.p2} a 2 dÃ­as, ${m.p7} a 7 dÃ­as y ${m.p90} a 90 dÃ­as. ` +
            `Se recomienda ingreso hospitalario y estudio etiolÃ³gico inmediato por el elevado riesgo de recurrencia a corto plazo.`;
  }

  // Copiar al portapapeles
  navigator.clipboard.writeText(texto).then(() => {
    const btn = document.getElementById('btnCopy');
    const original = btn.textContent;
    const originalBg = btn.style.background;
    const originalColor = btn.style.color;

    // Estilo temporal de "copiado"
    btn.textContent = 'Copiado';
    btn.style.background = '#0f3d83';
    btn.style.color = '#fff';

    // Revertir tras 3 segundos
    setTimeout(() => {
      btn.textContent = original;
      btn.style.background = originalBg;
      btn.style.color = originalColor;
    }, 3000);
  });
}


['a','b','c','d','di'].forEach(id=>{
  const el=document.getElementById(id);
  el.addEventListener('change',calc);
  el.addEventListener('input',calc);
});
document.getElementById('btnClear').addEventListener('click',borrar);
document.getElementById('btnCopy').addEventListener('click',copiar);
document.addEventListener('DOMContentLoaded',calc);
</script>

<footer style="position:relative;left:50%;transform:translateX(-50%);width:100vw;
  margin:2rem 0 0 0;padding:1.5rem 0;border-top:1px solid #e5e7eb;
  background:#ffffff;text-align:center;box-shadow:0 -2px 6px rgba(0,0,0,0.04);">
  <img src="uibanner.png" alt="Unidad de Ictus MÃ¡laga" style="max-width:380px;height:auto;opacity:.96;">
</footer>
<script src="js/index.js"></script>
</body>
</html>
