<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="manifest" href="../site.webmanifest">
<link rel="icon" type="image/png" sizes="192x192" href="../iconos/ictusgps.png">
<link rel="apple-touch-icon" sizes="180x180" href="../iconos/ictusgps.png">
<link rel="shortcut icon" href="../iconos/ictusgps.png">
<meta name="theme-color" content="#0f3d83">
<title>Hipolipemiantes</title>
<style>
/* =========================================================
   VARIABLES GLOBALES
========================================================= */
:root{
  --bg:#f8fafc; 
  --ink:#0e1a33;

  --azul:#0f3d83;
  --azul-institucional:#0f3d83;

  --accent-dark:#0f3d83;
  --accent-light:#2563eb;

  --border:#e5e9f2;
  --muted:#64748b;

  --ok:#166534;
  --ok-bg:#e9fce7;
  --ok-ring:#bbf7d0;

  --mid:#92400e;
  --mid-bg:#fff7ed;
  --mid-ring:#fed7aa;

  --bad:#991b1b;
  --bad-bg:#fef2f2;
  --bad-ring:#fecaca;

  --gris:#6b7280;
  --borde:#e5e7eb;
  --error:#b91c1c;

  --card:#ffffff;
  --shadow:rgba(15,23,42,.06);
}

/* CAMBIO DE TIPOGRAF√çA: Verdana forzada */
html,body, .wrap, .card, label, input, select, button, table, p, h1, h2, h3, li {
  font-family: Verdana, Geneva, sans-serif !important;
}
*{box-sizing:border-box}
html,body{
  margin:0;
  padding:0;
  background:var(--bg);
  color:var(--ink);
  font-family: Verdana, Geneva, Tahoma, sans-serif
}
.wrap{max-width:1100px;margin:0 auto;padding:.2rem}

/* =========================================================
   SAFE-TOP (FIJO 60 px + notch)
========================================================= */
.safe-top {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: calc(env(safe-area-inset-top) + 60px);
  background: var(--azul-institucional);
  z-index: 1001;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding-top: env(safe-area-inset-top);
}

.safe-content{
  width:100%;
  max-width:1080px;
  padding: 6px 16px 8px;
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
}

.safe-left{
  display:flex;
  align-items:center;
  gap:10px;
}

.safe-mini{
  width:44px;
  height:44px;
  object-fit:contain;
  padding:4px;
  box-shadow:0 0 4px rgba(0,0,0,0.1);
}

.safe-logo{
  height:44px;
  width:auto;
}

.safe-actions{
  display:flex;
  gap:10px;
}

.safe-btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:40px;
  height:40px;
  background:rgba(255,255,255,0.15);
  border:1px solid white;
  border-radius:50%;
  transition:background .25s, border-color .25s, transform .1s;
}

.safe-btn:hover{
  background:#01c5fe;
}

.safe-btn:active{
  transform:scale(0.95);
}

.safe-icon{
  width:32px; 
  height:32px;
  object-fit:contain;
}

/* =========================================================
   CABECERA STICKY
========================================================= */
header{
  position:sticky;
  top:calc(env(safe-area-inset-top) + 52px);
  z-index:1002;
  backdrop-filter:blur(6px);
  background:var(--azul-institucional);
  border-bottom:1px solid rgba(255,255,255,.08);
  box-shadow:0 2px 6px rgba(0,0,0,0.08);
  color:#fff;
}

.bar{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:10px;
  height:52px;
  padding:0 16px;
}

.title{
  display:flex;
  align-items:center;
  font-size:1.4rem;
  font-weight:700;
  color:#fff;
}

.title img{
  width:32px;
  height:32px;
  margin-right:8px;
}

/* Bloque "C√≥mo usar" al estilo FOP */

.howto{
  background:#fff;
  border:1px solid var(--border);
  border-radius:14px;
  box-shadow:0 2px 2px var(--muted);
  padding:1rem;
  margin:.3rem 0 1rem;
  font-size:14px;
}

/* Layout principal */
/* Una sola columna siempre */
.grid{
  display:block;     /* antes era grid */
  width:100%;
}

/* Eliminar columnas en pantallas grandes */
@media (min-width:900px){
  .grid{
    display:block;
  }
}

/* Asegurar separaci√≥n entre secciones */
.grid > section,
.grid > aside{
  margin-bottom: 20px;
}

.card{
  background:var(--card);
  border-left:4px solid grey;
  border-radius:16px;
  padding:1rem;
  box-shadow:1px 2px 10px var(--shadow);
  margin:1rem 0 1rem;

}
.card h2{font-size:16px;margin:.25rem 0 .75rem}

/* Campos */
fieldset{border:1px solid var(--border); border-radius:12px; padding:.75rem; margin:.75rem 0}
legend{font-weight:700; font-size:13px; padding:0 .35rem; color:#1e3a8a}
label{display:block; font-size:13px; margin:.4rem 0}
.row{display:grid; gap:.5rem}
@media (min-width:700px){ .row{grid-template-columns:repeat(2,1fr)} }
input[type="number"], select{
  width:100%;
  padding:.55rem .6rem;
  border:1px solid var(--border);
  border-radius:10px;
  background:#fff;
  font-size:14px
}
.hint{color:var(--muted); font-size:12px}

/* Resultado principal (contenedor) */
.results{
  padding-left:0;
  border-left:none;
}

/* P√≠ldoras y bloques de resultado cl√≠nico */
.pill{
  display:inline-block;
  padding:.15rem .5rem;
  border-radius:999px;
  font-size:12px;
  font-weight:700;
  border:1px solid var(--border);
  background:#f1f5f9
}
.ok{color:#0a7f3f} 
.warn{color:#b45309} 
.err{color:#b91c1c}

.result-block{
  margin:.75rem 0;
  padding:.75rem;
  border:1px dashed var(--border);
  border-radius:12px;
  background:#fafafa
}

.kbd{
  font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
  font-size:12px;
  background:#eef2ff;
  border:1px solid #c7d2fe;
  padding:.05rem .35rem;
  border-radius:6px
}

.hr{height:1px;background:var(--border);margin:1rem 0}
.footnote{font-size:12px; color:#64748b}
.hide{display:none !important}
.tag{
  background:#3366ff;
  border:1px solid #cfe3f6;
  color:#ffffff;
  padding:2px 8px;
  border-radius:999px;
  font-size:.78rem;
  font-weight:700
}

/* =========================================================
   KPI AL ESTILO FOP (4 cajas)
========================================================= */
.kpi{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
  margin-top:10px;
}

.box{
  border:1.5px dashed #c7dbff;
  border-radius:14px;
  padding:14px;
  background:#f8fbff;
  text-align:center;
}

.ttl{
  font-size:14px;
  color:#334155;
  font-weight:800;
  margin-bottom:2px;
}

.val{
  font-size:22px;
  font-weight:900;
  color:#0b2c5f;
}

.mini{
  font-size:12px;
  color:#64748b;
  margin-top:4px;
}

/* Tonos sobre las cajas, sin romper .ok/.warn existentes en texto */
.box.ok{
  background:var(--ok-bg);
  border-color:var(--ok-ring);
}
.box.warn{
  background:var(--mid-bg);
  border-color:var(--mid-ring);
}
.box.bad{
  background:var(--bad-bg);
  border-color:var(--bad-ring);
}
.box.ok .val{color:var(--ok);}
.box.warn .val{color:var(--mid);}
.box.bad .val{color:var(--bad);}

/* =========================================================
   BOTONES AL ESTILO FOP
========================================================= */
.actions{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin-top:16px;
}

.btn-action{
  flex:1 1 32%;
  border:none;
  border-radius:10px;
  padding:12px;
  font-size:15px;
  font-weight:700;
  cursor:pointer;
}

.btn-calc{
  background:#0f3d83;
  color:#fff;
  border:1px solid #0f3d83;
}
.btn-calc:hover{
  background:#1c60c3;
}

.btn-clear{
  background:#fff;
  color:#0b2c5f;
  border:1px solid #2563eb;
}
.btn-clear:hover{
  background:#eff6ff;
}

.btn-copy{
  background:#fff;
  color:#0f3d83;
  border:1px solid #2563eb;
}
.btn-copy:hover{
  background:#eff6ff;
}

/* Resumen para copiar (visible, estilo FOP) */
#resumenText{
  white-space:pre-wrap;
  font-size:13px;
  color:#0f172a;
  margin-top:12px;
  border:1px dashed var(--borde);
  border-radius:10px;
  padding:10px 12px;
  background:#f8fafc;
  line-height:1.45;
}

/* Toast */
.toast{
  position:fixed;
  bottom:16px;
  right:16px;
  background:#0f172a;
  color:#fff;
  padding:.6rem .8rem;
  border-radius:10px;
  font-size:13px;
  opacity:0;
  transform:translateY(8px);
  transition:opacity .2s ease, transform .2s ease;
  z-index:50
}
.toast.show{opacity:1; transform:translateY(0)}

/* Detalles bibliogr√°ficos */
details.ref{margin-top:1rem}
details.ref summary{cursor:pointer; font-weight:700; color:#1e3a8a}
details.ref .refbox{
  border:1px solid var(--border);
  border-radius:12px;
  padding:.75rem;
  margin-top:.5rem;
  background:#fff
}

@media print{
  .appbar,.actions,.howto{display:none !important}
  .wrap{padding:.25rem}
  .result-block{border:1px solid #999}
}

/* =======================================================
   DISCLAIMER FINAL ‚Äî fondo rojo tenue
======================================================= */
/* DISCLAIMER FINAL */
.disclaimer-red{
  background:#fff7f7;
  border-left:4px solid #d9534f;
  border-radius:12px;
  margin:8px 0 20px 0;
  padding:0.3rem 0.5rem;
  max-width:1080px;
  box-shadow:0 1px 4px rgba(217,83,79,0.05);
}
.disclaimer-red p{
  color:#7d1a1a;
  font-size:0.8rem;
}
.disclaimer-red b{
  color:#991b1b;
}

/* Pie */
footer{
  width:100%;
  margin:2rem 0 0;
  padding:1.5rem 0;
  border-top:1px solid #e5e7eb;
  background:#ffffff;
  text-align:center;
  box-shadow:0 -2px 6px rgba(0,0,0,0.04);
}
footer img{max-width:320px;height:auto;opacity:.95}

/* =========================================================
   MEDIA QUERIES
========================================================= */
@media(max-width:768px){
  header{font-size:1.05rem;}
  main{padding:0.9rem 1rem;}
  body{font-size:0.96rem;}
}

/* =========================================================
   PADDING SUPERIOR DEL CONTENIDO
========================================================= */

/* Empuja el contenido real por debajo de la barra superior */
body {
  margin: 0;
  padding-top: calc(env(safe-area-inset-top, 0px) + 52px);
  background-color: #fff;
}

/* =========================================================
   BLOQUES ESTILO FOP: ROPE / CLIN / ANAT
========================================================= */

/* --- ROPE (Azul) --- */
.block-rope {
  background: linear-gradient(to bottom, #eef4ff, #dbe7ff);
  border-left: 4px solid #0f3d83;
  border-radius: 16px;
  padding: 14px 16px;
  margin-bottom: 18px;
  box-shadow: 0 2px 6px rgba(15,61,131,0.15);
}

/* --- CLIN (Verde sanitario) --- */
.block-clin {
  background: #ecfdf5;
  border-left: 4px solid #059669;
  border-radius: 16px;
  padding: 14px 16px;
  margin-bottom: 18px;
  box-shadow: 0 2px 6px rgba(5,150,105,0.15);
}

/* --- ANAT (Beige c√°lido) --- */
.block-anat {
  background: #fff9e8;
  border-left: 4px solid #d4a94f;
  border-radius: 16px;
  padding: 14px 16px;
  margin-bottom: 18px;
  box-shadow: 0 2px 6px rgba(180,141,56,0.15);
}

/* Encabezado interno estilo FOP */
.block-title {
  font-size: 15px;
  font-weight: 800;
  margin-bottom: 8px;
  color: #0f3d83;
}

</style>
</head>
<body>

<!-- SAFE-TOP -->
<div class="safe-top">
  <div class="safe-content">
    <div class="safe-left">
      <img src="../iconos/utilidadesico.png" class="safe-mini" alt="">
      <img src="../img/topbar.png" class="safe-logo" alt="IctusGPS">
    </div>

    <div class="safe-actions">
      <a href="javascript:history.back()" class="safe-btn">
        <img src="../iconos/atrastransparente.png" class="safe-icon" alt="">
      </a>
      <a href="../index.html" class="safe-btn">
        <img src="../iconos/hometransparente.png" class="safe-icon" alt="">
      </a>
    </div>
  </div>
</div>

<!-- CABECERA -->
<header>
  <div class="bar">
    <div class="title">
      <img src="../iconos/hipolipemiantesico.png" alt="">Hipolipemiantes
    </div>
  </div>
</header>

<main class="wrap">
  <div class="howto">
    <b>C√≥mo usar:</b> seleccione el escenario cl√≠nico, describa el tratamiento actual (incluyendo dosis de estatina si procede) e introduzca el C-LDL.
    Pulse <span class="tag">Calcular</span> para obtener el objetivo y la actitud cl√≠nica. El motor aplica la <i>‚Äúregla del 6%‚Äù</i> al doblar dosis de estatina y calcula la <i>distancia al objetivo</i>.
  </div>

<div class="wrap grid">


    <form id="formLipidos" autocomplete="off">
<fieldset class="block-rope">
  <div class="block-title">ü©∫ Escenario cl√≠nico</div>
        <label><input type="radio" name="escenario" value="aterotrombotico" required> Ictus/AIT <b>aterotromb√≥tico</b> <span class="kbd">&lt;55 mg/dl</span></label>
        <label><input type="radio" name="escenario" value="no_aterotrombotico"> Ictus/AIT <b>no aterotromb√≥tico</b> <span class="kbd">&lt;70 mg/dl</span></label>
        <label><input type="radio" name="escenario" value="hemorragico"> Ictus <b>hemorr√°gico</b> (individualizar) <span class="kbd">&lt;70 mg/dl</span></label>
      </fieldset>

      <fieldset class="block-clin">
  <div class="block-title">üíä Tratamiento hipolipemiante actual</div>
        <label><input type="radio" name="tratamiento" value="ninguno" required> Sin hipolipemiante</label>
        <label><input type="radio" name="tratamiento" value="mono_estatina"> Estatina en monoterapia</label>
        <div id="bloqueEstatina" class="row hide" style="margin:.25rem 0 .5rem">
          <label> Tipo de estatina
            <select id="tipoEstatina">
              <option value="" disabled selected>‚Äî seleccione ‚Äî</option>
              <option value="atorvastatina">Atorvastatina</option>
              <option value="rosuvastatina">Rosuvastatina</option>
              <option value="otra">Otra (simva/prava/pitava‚Ä¶)</option>
            </select>
          </label>
          <label id="wrapDosis"> Dosis actual (mg)
            <select id="dosisEstatina">
              <option value="" disabled selected>‚Äî seleccione ‚Äî</option>
            </select>
          </label>
          <div id="notaOtra" class="hint" style="grid-column:1/-1; display:none">Se considerar√° <strong>intensidad moderada</strong>.</div>
        </div>
        <label><input type="radio" name="tratamiento" value="ezetimiba_mono"> Ezetimiba en monoterapia</label>
        <label><input type="radio" name="tratamiento" value="estatina_ezetimiba"> Estatina + ezetimiba</label>

        <label style="color:red; margin-top:.35rem"><input type="checkbox" id="intoleranciaStatinas"> Intolerancia/contraindicaci√≥n a estatinas</label>
        <label style="color:red; margin-top:.35rem"><input type="checkbox" id="ezetimibaContra"> Intolerancia/contraindicaci√≥n a ezetimiba</label>
        <label style="margin-top:.35rem"><input type="checkbox" id="ingreso"> Paciente actualmente ingresado (fase hospitalaria)</label>
      </fieldset>

      <fieldset class="block-anat">
  <div class="block-title">ü©∏ Anal√≠tica</div>
        <div class="row">
          <label> C-LDL actual (mg/dl)
            <input type="number" id="ldl" min="0" step="1" placeholder="p. ej., 118" required>
          </label>
          <label> C-LDL basal (mg/dl) <span class="hint">(opcional)</span>
            <input type="number" id="ldlBasal" min="0" step="1" placeholder="si se conoce">
          </label>
        </div>
        <label><input type="checkbox" id="lpaAlta"> Lp(a) elevada / relevante (si se conoce)</label>
      </fieldset>

      <!-- BOTONES AL ESTILO FOP (manteniendo IDs) -->
      <div class="actions">
        <button type="submit" id="btnCalcular" class="btn-action btn-calc">Calcular</button>
        <button type="button" class="btn-action btn-clear" id="btnLimpiar">Borrar</button>
        <button type="button" class="btn-action btn-copy no-print" id="btnPrint">Imprimir</button>
        <button type="button" class="btn-action btn-copy no-print" id="btnCopiar">Copiar resumen</button>
      </div>
    </form>
  

  <aside class="card">
    <h2>Resultados y recomendaci√≥n</h2>
    <div id="resultado" class="results">
      <p class="hint">Complete los supuestos y pulse <span class="tag">Calcular</span>.</p>
    </div>



   

<!-- Resumen cl√≠nico tipo FOP -->
<div class="wrap">
  <div id="resumenText"></div>
</div></aside>

    <!-- Disclaimer final con fondo rojo tenue (inicialmente oculto) -->
    <div class="disclaimer-red hide" id="disclaimerFinal">
      <p>Esta herramienta tiene finalidad exclusivamente orientativa y no sustituye el juicio cl√≠nico del facultativo.
        Las recomendaciones se basan en gu√≠as ESC/EAS y AHA/ASA vigentes, pero deben individualizarse seg√∫n el perfil
        de riesgo, comorbilidades y disponibilidad terap√©utica. El tratamiento hipolipemiante debe ajustarse siempre
        bajo supervisi√≥n m√©dica.</p></div>  

 <div class="howto">
 <details style="margin-top:1px;">
      <summary style="cursor:pointer;font-weight:700;color:#0f3d83;">üìö Bibliograf√≠a</summary>
      <div style="
  margin-top:14px;
  background:#ffffff;
  border:1px solid #d0d7e1;
  border-radius:10px;
  box-shadow:0 2px 6px rgba(0,0,0,0.05);
  overflow:hidden;
  font-size:13px;
  line-height:1.55;
  color:#1e293b;
">

  <!-- Barra superior tipo guideline -->
  <div style="
    background:#0f3d83;
    color:#ffffff;
    padding:10px 14px;
    font-size:14px;
    font-weight:700;
    letter-spacing:0.3px;
  ">
    üìò Referencias bibliogr√°ficas
  </div>

  <!-- Contenido -->
  <div style="padding:16px 18px;">

<ol style="margin:8px; padding-left:20px; font-size:10px; line-height:1.45;">

            <li>Mach F, et&nbsp;al. 2019 ESC/EAS Guidelines for the management of dyslipidaemias. <em>Eur Heart J</em>.</li>
            <li>Visseren FLJ, et&nbsp;al. 2021 ESC Guidelines on cardiovascular disease prevention. <em>Eur Heart J</em>.</li>
            <li>Kleindorfer DO, et&nbsp;al. 2021 AHA/ASA Guideline for the Prevention of Stroke in Patients With Stroke and TIA. <em>Stroke</em>.</li>
            <li>Cannon CP, et&nbsp;al. IMPROVE-IT. <em>N Engl J Med</em> 2015.</li>
            <li>Sabatine MS, et&nbsp;al. FOURIER; Giugliano RP, et&nbsp;al. FOURIER-OLE. <em>N Engl J Med</em>.</li>
            <li>Schwartz GG, et&nbsp;al. ODYSSEY OUTCOMES. <em>N Engl J Med</em> 2018.</li>
            <li>Ray KK, et&nbsp;al. ORION-10/11 (inclisir√°n). <em>N Engl J Med</em> 2020.</li>
            <li>Nissen SE, et&nbsp;al. CLEAR Outcomes (√°cido bempedoico). <em>N Engl J Med</em> 2023.</li>
            <li>Bohula EA, et&nbsp;al. VESALIUS-CV (evolocumab en pacientes sin IAM/ictus previos). <em>N Engl J Med</em> 2025.</li>
          </ol>
        </small>
      </div>
    </details>
<br>
<!-- Evidencia VESALIUS-CV -->
 <details style="margin-top:1px;">
      <summary style="cursor:pointer;font-weight:700;color:#0f3d83;">üö® Evidencia reciente</summary>
      <div style="
  margin-top:14px;
  background:#ffffff;
  border:1px solid #d0d7e1;
  border-radius:10px;
  box-shadow:0 2px 6px rgba(0,0,0,0.05);
  overflow:hidden;
  font-size:13px;
  line-height:1.55;
  color:#1e293b;
">

  <!-- Barra superior tipo guideline -->
  <div style="
    background:#0f3d83;
    color:#ffffff;
    padding:10px 14px;
    font-size:14px;
    font-weight:700;
    letter-spacing:0.3px;
  ">
    üì∞ VESALIUS-CV (NEJM 2025)
  </div>

  <!-- Contenido -->
  <div style="padding:16px 18px;">

          <b>VESALIUS-CV</b> evalu√≥ evolocumab frente a placebo en 12.257 pacientes con aterosclerosis o diabetes,
          sin infarto ni ictus previos y con C-LDL ‚â•90 mg/dl, ya en tratamiento hipolipemiante optimizado.
          Tras 4,6 a√±os de seguimiento:
          <ul style="margin-top:4px">
            <li><b>Reducci√≥n del 25&nbsp;%</b> en 3-point MACE (muerte coronaria, IAM o ictus isqu√©mico).</li>
            <li><b>Reducci√≥n del 19&nbsp;%</b> en 4-point MACE (a√±adiendo revascularizaci√≥n isqu√©mica).</li>
            <li>Descenso adicional de C-LDL ‚âà<b>55&nbsp;%</b> (mediana ‚âà45&nbsp;mg/dl) sin se√±al de toxicidad relevante.</li>
          </ul>
          Refuerza la seguridad de objetivos de C-LDL muy bajos y respalda el uso precoz de inhibidores PCSK9
          en pacientes de muy alto riesgo que no alcanzan objetivo pese a tratamiento √≥ptimo.
      </div>
    </details>
</div>
<div id="toast" class="toast">Copiado al portapapeles</div>

<script>
(function(){
  const $ = sel => document.querySelector(sel);
  const $$ = sel => Array.from(document.querySelectorAll(sel));

  function toggleBloqueEstatina(){
    const tto = ($$('input[name="tratamiento"]:checked')[0]||{}).value;
    const show = (tto==='mono_estatina' || tto==='estatina_ezetimiba');
    $('#bloqueEstatina').classList.toggle('hide', !show);
  }

  function loadDoseOptions(){
    const tipo = $('#tipoEstatina').value, dose = $('#dosisEstatina');
    const wrap = $('#wrapDosis'), nota = $('#notaOtra');
    dose.innerHTML = '<option value="" disabled selected>‚Äî seleccione ‚Äî</option>';
    wrap.style.display = 'block'; nota.style.display = 'none';
    if(tipo==='atorvastatina'){
      [10,20,40,80].forEach(m=>{
        let o=document.createElement('option');
        o.value=m; o.textContent=m+' mg'; dose.appendChild(o);
      });
    } else if(tipo==='rosuvastatina'){
      [5,10,20,40].forEach(m=>{
        let o=document.createElement('option');
        o.value=m; o.textContent=m+' mg'; dose.appendChild(o);
      });
    } else if(tipo==='otra'){
      wrap.style.display='none'; nota.style.display='block';
    }
  }

  $$('input[name="tratamiento"]').forEach(r=>r.addEventListener('change', toggleBloqueEstatina));
  $('#tipoEstatina').addEventListener('change', loadDoseOptions);

  function objetivoLDL(escenario){
    return (escenario==='aterotrombotico')?55:70;
  }
  function pctReduccion(ldlActual, ldlBasal){
    if(!ldlBasal||ldlBasal<=0) return null;
    return Math.round((ldlBasal-ldlActual)/ldlBasal*100);
  }
  function textoEscenario(v){
    return {
      'aterotrombotico':'Ictus/AIT aterotromb√≥tico',
      'no_aterotrombotico':'Ictus/AIT no aterotromb√≥tico',
      'hemorragico':'Ictus hemorr√°gico'
    }[v]||'‚Äî';
  }
  function statinIntensity(tipo,dosis){
    if(!tipo) return 'none';
    if(tipo==='atorvastatina'){
      if(dosis>=40) return 'high';
      if(dosis===10||dosis===20) return 'moderate';
      return 'moderate';
    }
    if(tipo==='rosuvastatina'){
      if(dosis>=20) return 'high';
      if(dosis===5||dosis===10) return 'moderate';
      return 'moderate';
    }
    if(tipo==='otra') return 'moderate';
    return 'none';
  }

  function textoTratamiento(p){
    const t=p.tratamiento;
    if(t==='ninguno') return 'Sin hipolipemiante';
    if(t==='ezetimiba_mono') return 'Ezetimiba en monoterapia';
    if(t==='mono_estatina' || t==='estatina_ezetimiba'){
      const base=(p.tipoEstatina? p.tipoEstatina.charAt(0).toUpperCase()+p.tipoEstatina.slice(1):'Estatina');
      const doseTxt=(p.tipoEstatina==='otra')?' (intensidad moderada)':(p.dosisEstatina?` ${p.dosisEstatina} mg`: '');
      return (t==='mono_estatina'?'Monoterapia: ':'Combinaci√≥n: ')+base+doseTxt+(t==='estatina_ezetimiba'?' + ezetimiba':'');
    }
    return '‚Äî';
  }

  function construirRecomendacion(data){
    const recs=[], avisos=[], notas=[];
    const obj=objetivoLDL(data.escenario);
    const delta=Math.max(0, data.ldl-obj);
    const ezContra=$('#ezetimibaContra').checked;
    const intolerancia=$('#intoleranciaStatinas').checked;
    const inpatient=data.ingreso;

    const intensidad=statinIntensity(data.tipoEstatina, data.dosisEstatina);
    const isA40=(data.tipoEstatina==='atorvastatina' && data.dosisEstatina===40);
    const isR20=(data.tipoEstatina==='rosuvastatina' && data.dosisEstatina===20);
    const isA80=(data.tipoEstatina==='atorvastatina' && data.dosisEstatina===80);
    const isR40=(data.tipoEstatina==='rosuvastatina' && data.dosisEstatina===40);
    const NEAR_MG = 5;

    // Objetivos seg√∫n escenario
    if(data.escenario==='aterotrombotico'){
      recs.push(`<div class="result-block"><strong>Objetivo C-LDL:</strong> <span class="kbd">&lt;${obj} mg/dl</span> <span class="hint">(y reducci√≥n ‚â•50% si hay basal)</span>.</div>`);
    } else if(data.escenario==='no_aterotrombotico'){
      recs.push(`<div class="result-block"><strong>Objetivo C-LDL:</strong> <span class="kbd">&lt;${obj} mg/dl</span>.</div>`);
    } else {
      recs.push(`<div class="result-block"><strong>Objetivo orientativo C-LDL:</strong> <span class="kbd">&lt;${obj} mg/dl</span>. Individualizar.</div>`);
    }

    if(delta===0){
      recs.push(`<div class="result-block ok"><strong>Objetivo alcanzado.</strong> Mantener y reforzar adherencia.</div>`);
    } else {

      // ===============================================
      // SIN HIPOLIPEMIANTE PREVIO
      // ===============================================
      if(data.tratamiento==='ninguno'){
        if(!intolerancia){
          recs.push(`<div class="result-block">
            <strong>Iniciar</strong> estatina de <u>alta intensidad</u>${inpatient?' (durante ingreso)':''}: 
            atorvastatina 40‚Äì80 mg o rosuvastatina 20‚Äì40 mg. Control 4‚Äì12 semanas.${inpatient && data.escenario==='aterotrombotico' && data.ldl>=100 
            ? ' <strong>Valorar iPCSK9 precoz / inclisir√°n.</strong>' : ''}
          </div>`);
        } else {
          if(ezContra){
            recs.push(`<div class="result-block"><u>Intolerancia a estatinas</u> y ezetimiba no viable: 
            <strong>iPCSK9</strong> o <strong>inclisir√°n</strong>. Considerar <strong>√°cido bempedoico</strong>.</div>`);
          } else {
            recs.push(`<div class="result-block"><u>Intolerancia a estatinas</u>: 
            <strong>ezetimiba</strong> ¬± <strong>√°cido bempedoico</strong>; si no objetivo, 
            <strong>iPCSK9</strong> / <strong>inclisir√°n</strong>.</div>`);
          }
        }
      }

      // ===============================================
      // ESTATINA EN MONOTERAPIA
      // ===============================================
      if(data.tratamiento==='mono_estatina'){
        if(intolerancia){
          if(ezContra){
            recs.push(`<div class="result-block"><u>Intolerancia a estatinas</u> (monoterapia actual) y ezetimiba no viable: 
            <strong>iPCSK9</strong> o <strong>inclisir√°n</strong>. Valorar <strong>√°cido bempedoico</strong>.</div>`);
          } else {
            recs.push(`<div class="result-block"><u>Intolerancia a estatinas</u>: 
            <strong>suspender/evitar la escalada</strong> y usar <strong>ezetimiba</strong> ¬± <strong>√°cido bempedoico</strong>; 
            si no objetivo, <strong>iPCSK9</strong>/ <strong>inclisir√°n</strong>.</div>`);
          }
        } else {
          if(intensidad==='moderate'){
            const esc=(data.tipoEstatina==='atorvastatina')?'Subir a atorvastatina 40‚Äì80 mg.':
                      (data.tipoEstatina==='rosuvastatina')?'Subir a rosuvastatina 20‚Äì40 mg.':
                      'Optimizar a alta intensidad.';
            recs.push(`<div class="result-block">
              <strong>No objetivo con dosis moderada:</strong> ${esc} Revisi√≥n 4‚Äì12 semanas. 
              ${ezContra?'(ezetimiba no viable).':'Si persiste, <strong>a√±adir ezetimiba</strong>.'}
              ${inpatient && data.escenario==='aterotrombotico' && data.ldl>=100 
                ? ' <strong>Valorar iPCSK9 precoz / inclisir√°n.</strong>' : ''}
            </div>`);
          } else if(intensidad==='high'){
            if((isA40 || isR20) && delta <= NEAR_MG){
              const textoMax = isA40 ? 'atorvastatina 80 mg' : 'rosuvastatina 40 mg';
              const extra = Math.round(data.ldl*0.06);
              recs.push(`<div class="result-block"><strong>Muy cerca del objetivo</strong> con <u>estatina alta (monoterapia)</u>: 
              <strong>subir a ${textoMax}</strong> y reevaluar en 4‚Äì12 semanas (doblar dosis ‚âà6% ‚âà ${extra} mg/dl). 
              Si persiste fuera de objetivo, <strong>a√±adir ezetimiba</strong>.
              ${inpatient && data.escenario==='aterotrombotico' && data.ldl>=100 
                ? ' <strong>Valorar iPCSK9 precoz / inclisir√°n.</strong>' : ''}</div>`);
            } else if(ezContra){
              recs.push(`<div class="result-block">En <u>estatina alta</u> y ezetimiba no viable: 
              <strong>iPCSK9</strong> o <strong>inclisir√°n</strong>. 
              Valorar <strong>√°cido bempedoico</strong> como coadyuvante.</div>`);
            } else if(isA80 || isR40){
              recs.push(`<div class="result-block">En <u>dosis m√°ximas</u>: 
              <strong>a√±adir ezetimiba</strong>; si persiste, 
              <strong>iPCSK9</strong>/ <strong>inclisir√°n</strong>. 
              Considerar <strong>√°cido bempedoico</strong>.
              ${inpatient && data.escenario==='aterotrombotico' && data.ldl>=100 
                ? ' <strong>Valorar iPCSK9 precoz / inclisir√°n.</strong>' : ''}</div>`);
            } else {
              const extra=Math.round(data.ldl*0.06);
              recs.push(`<div class="result-block">En <u>estatina alta</u> sin objetivo: 
              <strong>a√±adir ezetimiba</strong> (doblar dosis ‚âà6% ‚âà ${extra} mg/dl).
              ${inpatient && data.escenario==='aterotrombotico' && data.ldl>=100 
                ? ' <strong>Valorar iPCSK9 precoz / inclisir√°n.</strong>' : ''}</div>`);
            }
          } else {
            avisos.push('Indique tipo y dosis de estatina para ajustar la recomendaci√≥n.');
          }
        }
      }

      // ===============================================
      // EZETIMIBA EN MONOTERAPIA
      // ===============================================
      if(data.tratamiento==='ezetimiba_mono'){
        if(ezContra){
          avisos.push('Seleccion√≥ ‚ÄúEzetimiba en monoterapia‚Äù pero marc√≥ ‚ÄúEzetimiba contraindicada/no tolerada‚Äù. Se interpreta como sin tratamiento activo.');
          if(intolerancia){
            recs.push(`<div class="result-block"><u>Intolerancia a estatinas</u> y ezetimiba no viable: 
            <strong>iPCSK9</strong> o <strong>inclisir√°n</strong>. Valorar <strong>√°cido bempedoico</strong>.</div>`);
          } else {
            recs.push(`<div class="result-block"><strong>Iniciar</strong> estatina de alta intensidad; 
            si no viable/no se acepta, <strong>iPCSK9</strong> / <strong>inclisir√°n</strong> y considerar 
            <strong>√°cido bempedoico</strong>.
            ${inpatient && data.escenario==='aterotrombotico' && data.ldl>=100 
              ? ' <strong>Valorar iPCSK9 precoz / inclisir√°n.</strong>' : ''}</div>`);
          }
        } else {
          if(intolerancia){
            recs.push(`<div class="result-block"><strong>Ezetimiba en monoterapia</strong> con <u>intolerancia a estatinas</u>: 
            si no objetivo, <strong>iPCSK9</strong> o <strong>inclisir√°n</strong>. 
            El <strong>√°cido bempedoico</strong> es opci√≥n oral adicional.</div>`);
          } else {
            recs.push(`<div class="result-block"><strong>Ezetimiba en monoterapia</strong> y fuera de objetivo: 
            <strong>iniciar/optimizar estatina de alta intensidad</strong> manteniendo ezetimiba; 
            si persiste, <strong>iPCSK9</strong> / <strong>inclisir√°n</strong>. 
            Considerar <strong>√°cido bempedoico</strong>.
            ${inpatient && data.escenario==='aterotrombotico' && data.ldl>=100 
              ? ' <strong>Valorar iPCSK9 precoz / inclisir√°n.</strong>' : ''}</div>`);
          }
        }
      }

      // ===============================================
      // ESTATINA + EZETIMIBA
      // ===============================================
      if(data.tratamiento==='estatina_ezetimiba'){
        if(ezContra){
          avisos.push('Marc√≥ ‚ÄúEzetimiba contraindicada/no tolerada‚Äù pero seleccion√≥ ‚ÄúEstatina + ezetimiba‚Äù. Se tratar√° como estatina en monoterapia.');
        } else {
          const intens=statinIntensity(data.tipoEstatina, data.dosisEstatina);
          if(intens==='moderate'){
            const esc=(data.tipoEstatina==='atorvastatina')?'Optimizar a atorvastatina 40‚Äì80 mg.':
                      (data.tipoEstatina==='rosuvastatina')?'Optimizar a rosuvastatina 20‚Äì40 mg.':
                      'Optimizar a alta intensidad.';
            recs.push(`<div class="result-block">Con <u>estatina moderada + ezetimiba</u>: 
            ${esc} Si persiste fuera de objetivo, <strong>iPCSK9</strong> o <strong>inclisir√°n</strong>. 
            Valorar <strong>√°cido bempedoico</strong>.
            ${inpatient && data.escenario==='aterotrombotico' && data.ldl>=100 
              ? ' <strong>Valorar iPCSK9 precoz / inclisir√°n.</strong>' : ''}</div>`);
          } else {
            if((isA40 || isR20) && delta <= NEAR_MG){
              const textoMax = isA40 ? 'atorvastatina 80 mg' : 'rosuvastatina 40 mg';
              const extra = Math.round(data.ldl*0.06);
              recs.push(`<div class="result-block"><strong>Muy cerca del objetivo</strong> con <u>estatina alta + ezetimiba</u>: 
              <strong>subir a ${textoMax}</strong> y reevaluar en 4‚Äì12 semanas (doblar dosis ‚âà6% ‚âà ${extra} mg/dl). 
              Reservar <strong>iPCSK9</strong>/<strong>inclisir√°n</strong> si persiste fuera de objetivo.
              ${inpatient && data.escenario==='aterotrombotico' && data.ldl>=100 
                ? ' <strong>Valorar iPCSK9 precoz / inclisir√°n.</strong>' : ''}</div>`);
            } else {
              recs.push(`<div class="result-block">Con <u>estatina alta + ezetimiba</u> y fuera de objetivo: 
              <strong>iPCSK9</strong> (evolocumab/alirocumab) o <strong>inclisir√°n</strong>. 
              El <strong>√°cido bempedoico</strong> puede considerarse como opci√≥n oral adicional.
              ${inpatient && data.escenario==='aterotrombotico' && data.ldl>=100 
                ? ' <strong>Valorar iPCSK9 precoz / inclisir√°n.</strong>' : ''}</div>`);
            }
          }
        }
      }

      // ===============================================
      // ESCENARIO HEMORR√ÅGICO ‚Äî AVISO
      // ===============================================
      if(data.escenario==='hemorragico'){
        avisos.push('En ictus hemorr√°gico, individualizar la intensificaci√≥n hipolipemiante seg√∫n balance riesgo/beneficio y riesgo hemorr√°gico cerebral.');
      }
    }

    // Informaci√≥n de reducci√≥n porcentual si hay LDL basal
    if(data.pctRed !== null){
      recs.push(`<div class="result-block"><strong>Reducci√≥n vs. basal:</strong> ${Math.abs(data.pctRed)}% 
      ${data.pctRed>=50?'<span class="ok">(‚â•50% alcanzado)</span>':'<span class="warn">(&lt;50% ‚Äî intensificar)</span>'}</div>`);
    }

    // Notas transversales
    const transv=[]; 
    transv.push(`Planificar <strong>revisi√≥n cl√≠nica y anal√≠tica a los 3 meses</strong>.`);
    if(data.lpaAlta)
      transv.push(`<strong>Lp(a) elevada</strong>: intensificar el control de C-LDL (iPCSK9 reduce modestamente Lp(a)).`);
    notas.push(`<div class="result-block">${transv.join(' ')}</div>`);

    // LDL muy bajo
    if(data.ldl < 40 && data.escenario !== 'hemorragico'){
      notas.push(`<div class="result-block">
        <strong>C-LDL muy bajo (&lt;40 mg/dl):</strong> los ensayos con inhibidores PCSK9 (FOURIER-OLE, VESALIUS-CV) no han mostrado se√±ales de seguridad relevantes con LDL muy bajos mantenidos; puede mantenerse la estrategia, monitorizando tolerancia y comorbilidades.
      </div>`);
    }

    // LDL muy alto en ictus aterotromb√≥tico
    if(data.escenario === 'aterotrombotico' && data.ldl >= 100){
      notas.push(`<div class="result-block">
        <strong>C-LDL ‚â•100 mg/dl en ictus aterotromb√≥tico:</strong> en pacientes de muy alto riesgo, la evidencia de inhibidores PCSK9 (FOURIER, ODYSSEY y VESALIUS-CV) apoya 
        <strong>acelerar la intensificaci√≥n</strong> (incluyendo <strong>iPCSK9</strong> o <strong>inclisir√°n</strong>) si persiste fuera de objetivo pese a tratamiento optimizado.
      </div>`);
    }

    return {recs, avisos, notas, obj, delta};
  }

  function ensamblarResumenTXT(payload, htmlPlano){
    const nl = '\r\n';
    let t = [];

    t.push('SELECCI√ìN DE TRATAMIENTO HIPOLIPEMIANTE');
    t.push('======================================');
    t.push('');
    t.push(`Escenario:        ${textoEscenario(payload.escenario)}`);
    t.push(`C-LDL:            ${payload.ldl} mg/dl`);
    t.push(`Objetivo:         < ${payload.obj} mg/dl`);
    t.push(`Distancia:        ${payload.delta} mg/dl`);
    if(payload.pctRed !== null)
      t.push(`Reducci√≥n basal:  ${payload.pctRed}%`);
    t.push(`Tratamiento:      ${textoTratamiento(payload)}`);
    t.push('');
    t.push('Conclusiones cl√≠nicas:');
    t.push('-----------------------');

    const tmp=document.createElement('div');
    tmp.innerHTML=htmlPlano;
    t.push(tmp.textContent.trim());
    t.push('');
    t.push('Referencias: ESC/EAS 2019‚Äì2021; AHA/ASA 2021; ensayos FOURIER, ODYSSEY, CLEAR Outcomes y VESALIUS-CV (NEJM 2025, evolocumab en prevenci√≥n CV de alto riesgo).');

    return t.join(nl);
  }

  async function copiarResumen(){
    const texto = $('#resumenText').textContent.trim();
    if(!texto){
      alert('Primero calcule una recomendaci√≥n.');
      return;
    }

    try{
      await navigator.clipboard.writeText(texto);
      mostrarToast('Copiado al portapapeles');
    }catch(e){
      const ta=document.createElement('textarea'); 
      ta.value=texto; 
      document.body.appendChild(ta); 
      ta.select();
      try{
        document.execCommand('copy');
        mostrarToast('Copiado al portapapeles');
      }catch(err){
        alert('No se pudo copiar autom√°ticamente. Seleccione y copie manualmente.');
      }finally{
        ta.remove();
      }
    }
  }

  function mostrarToast(msg){
    const t=$('#toast'); 
    t.textContent=msg; 
    t.classList.add('show');
    setTimeout(()=>t.classList.remove('show'), 1800);
  }

  $('#formLipidos').addEventListener('submit', function(e){
    e.preventDefault();
    const $$r = n => ($$('input[name="'+n+'"]:checked')[0]||{}).value;
    const escenario=$$r('escenario');
    const tratamiento=$$r('tratamiento');
    const ingreso=$('#ingreso').checked;
    const ldl=parseFloat($('#ldl').value);
    const ldlBasal=$('#ldlBasal').value ? parseFloat($('#ldlBasal').value) : null;
    const lpaAlta=$('#lpaAlta').checked;

    let tipoEstatina=null, dosisEstatina=null;
    if(tratamiento==='mono_estatina' || tratamiento==='estatina_ezetimiba'){
      tipoEstatina=$('#tipoEstatina').value || null;
      if(tipoEstatina==='atorvastatina' || tipoEstatina==='rosuvastatina'){
        const v=$('#dosisEstatina').value; if(v) dosisEstatina=parseInt(v,10);
      }
      if(!tipoEstatina){
        $('#resultado').innerHTML=`<p class="err">Indique el <strong>tipo de estatina</strong>.</p>`;
        $('#resumenText').textContent = '';
        $('#disclaimerFinal').classList.add('hide');
        return;
      }
      if((tipoEstatina==='atorvastatina'||tipoEstatina==='rosuvastatina') && !dosisEstatina){
        $('#resultado').innerHTML=`<p class="err">Indique la <strong>dosis actual</strong> de la estatina.</p>`;
        $('#resumenText').textContent = '';
        $('#disclaimerFinal').classList.add('hide');
        return;
      }
    }

    if(!escenario || !tratamiento || isNaN(ldl)){
      $('#resultado').innerHTML = `<p class="err">Complete todos los campos obligatorios.</p>`;
      $('#resumenText').textContent = '';
      $('#disclaimerFinal').classList.add('hide');
    return;
    }

    const pctRed=pctReduccion(ldl, ldlBasal);
    const payload={escenario,tratamiento,ingreso,ldl,ldlBasal,lpaAlta,pctRed,tipoEstatina,dosisEstatina};
    const {recs,avisos,notas,obj,delta}=construirRecomendacion(payload);

    /* Cabecera de resultados al estilo KPI FOP (4 cajas) */
    let html='';
    html += `
<div class="kpi">
  <div class="box">
    <div class="ttl">Escenario</div>
    <div class="val">${textoEscenario(escenario)}</div>
  </div>

  <div class="box">
    <div class="ttl">C-LDL actual</div>
    <div class="val">${ldl} mg/dl</div>
  </div>

  <div class="box">
    <div class="ttl">Objetivo</div>
    <div class="val">&lt;${obj} mg/dl</div>
  </div>

  <div class="box ${delta===0 ? 'ok' : (delta<=10 ? 'warn' : 'bad')}">
    <div class="ttl">Distancia / reducci√≥n</div>
    <div class="val">${delta} mg/dl</div>
    ${pctRed!==null ? `<div class="mini">Reducci√≥n: ${pctRed}%</div>` : ''}
  </div>
</div>
`;
    html+=`<div class="hr"></div>`;
    html+=recs.join('');
    if(avisos.length) html+=`<div class="result-block warn"><strong>Notas:</strong> ${avisos.join(' ')}</div>`;
    if(notas.length) html+=notas.join('');

    $('#resultado').innerHTML=html;
// üîµ Scroll suave al bloque de resultados
const target = document.getElementById("resultado");
if (target) {
  // Ajuste para safe-top + header (como en FOP)
  const headerOffset = 170; 
  const y = target.getBoundingClientRect().top + window.pageYOffset - headerOffset;

  window.scrollTo({
    top: y,
    behavior: "smooth"
  });
}

    // Construir resumen textual y mostrarlo en #resumenText
    const htmlPlano = recs.join('') + (avisos.length? `<p>${avisos.join(' ')}</p>`:'') + notas.join('');
    const resumen = ensamblarResumenTXT({...payload, obj, delta}, htmlPlano);
    $('#resumenText').textContent = resumen;

    // Mostrar el disclaimer solo tras obtener resultado v√°lido
    $('#disclaimerFinal').classList.remove('hide');
  });

  $('#btnLimpiar').addEventListener('click', ()=>{
    $('#formLipidos').reset();
    $('#bloqueEstatina').classList.add('hide');
    $('#wrapDosis').style.display='block';
    $('#notaOtra').style.display='none';
    $('#resultado').innerHTML = `<p class="hint">Complete los supuestos y pulse <span class="tag">Calcular</span>.</p>`;
    $('#disclaimerFinal').classList.add('hide');
    $('#resumenText').textContent = '';
    // Scroll al inicio suavemente
    window.scrollTo({
      top: 0,
      behavior: "smooth"
    });
  });

  $('#btnPrint').addEventListener('click', ()=>{
    const resultado = $('#resultado').innerHTML.trim();
    if(!resultado || resultado.includes('Complete')){
      alert('Primero calcule una recomendaci√≥n.');
      return;
    }

    const fecha = new Date().toLocaleString('es-ES', { dateStyle:'short', timeStyle:'short' });
    const informe = `
<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Informe ‚Äì Tratamiento hipolipemiante</title>
<style>
  :root{
    --bg:#f8fafc; --card:#ffffff; --ink:#0f172a; --muted:#475569;
    --accent:#2563eb; --accent-light:#dbeafe;
    --ok:#0a7f3f; --warn:#b45309; --bad:#b91c1c;
  }
  body{
    font-family:Verdana, Geneva, Tahoma, sans-serif;
    color:var(--ink);
    background:var(--bg);
    margin:32px auto;
    max-width:800px;
    line-height:1.5;
  }
  h1{color:var(--accent);font-size:1.4rem;margin-bottom:4px;}
  h2{font-size:1.1rem;margin:18px 0 6px;}
  p{margin:4px 0 8px;}
  .muted{color:var(--muted);}
  .card{
    background:var(--card);
    border:1px solid var(--accent-light);
    border-radius:14px;
    padding:18px 20px;
    margin-top:14px;
    box-shadow:0 4px 14px rgba(0,0,0,.06);
  }
  .pill{
    display:inline-block;
    background:var(--accent-light);
    color:var(--accent);
    border-radius:999px;
    padding:2px 8px;
    font-size:.78rem;
    font-weight:700;
    margin-right:4px;
  }
  .result-block{margin:.7rem 0;padding:.7rem;border:1px dashed #cbd5e1;border-radius:12px;background:#f9fafb;}
  .ok{color:var(--ok);} .warn{color:var(--warn);} .err{color:var(--bad);}
  ul{margin:0 0 0 20px;padding:0;}
  .foot{
    margin-top:16px;
    font-size:.85rem;
    color:var(--muted);
    border-top:1px solid var(--accent-light);
    padding-top:8px;
    text-align:right;
  }
  button{display:inline-block;margin-top:14px;background:var(--accent);color:white;border:0;border-radius:999px;padding:8px 14px;font-weight:600;cursor:pointer;}
  @media print {.no-print{display:none}}
</style>
</head>
<body>
  <h1>Informe ‚Äì Selecci√≥n de tratamiento hipolipemiante</h1>
  <div class="muted">Generado: ${fecha}</div>

  <div class="card">
    ${resultado}
    <div class="foot">Herramienta de apoyo cl√≠nico. Interpretaci√≥n facultativa obligatoria.</div>
  </div>

  <button class="no-print" onclick="window.print()">Imprimir / Guardar PDF</button>
  <script>window.addEventListener('load',()=>setTimeout(()=>window.print(),300));<\/script>
</body>
</html>`;

    const w = window.open('', '_blank');
    w.document.open();
    w.document.write(informe);
    w.document.close();
  });

  $('#btnCopiar').addEventListener('click', copiarResumen);

  toggleBloqueEstatina();
})();
</script>

<script src="../js/index.js"></script>
</main>
<footer>
  <img src="../img/uibanner.png" alt="Ictus GPS">
</footer>
</body>
</html>
